import{p as N,c as r,o as s,d as h,g as a,w as o,f as m,k as j,ad as te,P as K,S as U,ae,r as b,l as z,af as E,ag as oe,q as se,U as re,ah as le,ai as ne,v as ce,H as $,x as de,X as ue,W as R,e as t,h as g,i as C,aj as ie,F as _e,ak as me,al as F,am as L}from"./index-bb5a7992.js";const ve={},fe={class:"mt-10"},pe={class:"flex flex-col gap-3 justify-center items-center"},ye=m("h1",{class:"text-center text-3xl"},"Board not found",-1),xe=m("p",{class:"md:w-2/6 w-full mx-auto text-center"}," This board may be private. If someone gave you this link, they may need to invite you to their Workspace. ",-1);function ge(k,v){const f=r("v-btn"),p=r("router-link"),y=r("v-col"),l=r("v-row");return s(),h("div",fe,[a(l,null,{default:o(()=>[a(y,null,{default:o(()=>[m("div",pe,[ye,xe,a(p,{to:"/"},{default:o(()=>[a(f,{color:"primary",class:"w-max"},{default:o(()=>[j(" Home ")]),_:1})]),_:1})])]),_:1})]),_:1})])}const be=N(ve,[["render",ge]]),he={class:"flex h-full w-full justify-center items-center"},ke=m("h1",{class:"text-center"},"This Board is closed",-1),we={class:"flex flex-col justify-center items-center space-y-10"},Be={__name:"BoardClosed",props:te({workspaceId:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(k){const v=K(),f=U(),p=ae(k,"modelValue"),y=k,l=b(!1),I=()=>{l.value=!0,z.put(`/b/${v.params.boardId}`,{workspace:y.workspaceId,closed:!1},{withCredentials:!0}).then(c=>{E.emit("change-board-info",v.params.boardId),f.go(`/b/${c.data.id}`)}).catch(c=>{toastError(c)}).finally(()=>{l.value=!1})};return(c,d)=>{const e=r("v-btn"),x=r("v-card-text"),u=r("v-card");return s(),h("div",he,[a(u,{class:"w-2/3 h-2/3 !flex flex-col justify-center items-center"},{default:o(()=>[a(x,{class:"my-auto flex justify-center items-center flex-col space-y-2"},{default:o(()=>[ke,m("div",we,[a(e,{variant:"flat",color:"primary",onClick:d[0]||(d[0]=()=>I())},{default:o(()=>[j(" Reopen board ")]),_:1}),a(e,{variant:"text",color:"primary",onClick:d[1]||(d[1]=w=>p.value=!0)},{default:o(()=>[j(" Permanently delete board ")]),_:1})])]),_:1})]),_:1})])}}};const Ie={key:1},Ve={key:1,class:"flex flex-col items-start justify-start"},De={class:"flex max-h-[80vh] flex-1 mt-2"},Se={__name:"Board",setup(k){const v=F(()=>L(()=>import("./DangerDeleteModal-ce517b2b.js"),["assets/DangerDeleteModal-ce517b2b.js","assets/index-bb5a7992.js","assets/index-a564bb98.css"])),f=F(()=>L(()=>import("./DraggableLists-4348cf46.js"),["assets/DraggableLists-4348cf46.js","assets/index-bb5a7992.js","assets/index-a564bb98.css","assets/vue-draggable-plus-6cde08f2.js"])),{mdAndUp:p}=oe(),y=se(),l=K(),I=re(),c=b(!1),d=U(),{board:e,status:x,isLoading:u}=le(l.params.boardId),w=b(!1),B=b(!1),G=ne(),{currentBoard:H,currentStatus:O,sideDrawer:W,currentBoardIsAdmin:q,settingsDrawer:X}=ce(G),i=b(!1);$(e,()=>{H.value=e.value,O.value=x.value,c.value=e.value.isAdmin,q.value=c.value}),$(i,()=>{W.value=i.value});const J=()=>{u.value=!0,z.delete(`/b/${l.params.boardId}`,{withCredentials:!0}).then(_=>{Q(),E.emit("change-board-info",l.params.boardId),d.push("/")}).catch(_=>{console.log(_)}).finally(()=>{u.value=!1})};$(w,()=>{X.value=w.value});const Q=()=>{w.value=!1,I.success("Board updated")},V=()=>{i.value=!i.value,localStorage.setItem("board-sidebar",i.value)};de(async()=>{E.emit("subscribe",l.params.boardId),await y.getFavoriteBoards(),i.value=!!(localStorage.getItem("board-sidebar")==="true"&&p.value)});const Y=_=>{_.ctrlKey&&_.code==="Slash"&&V()};return(_,n)=>{var A;const Z=r("GlobalEvents"),ee=r("v-progress-circular"),D=r("v-main");return s(),h(_e,null,[a(Z,{onKeyup:[ue(Y,["prevent"]),n[0]||(n[0]=R(()=>V(),["metaKey"])),n[1]||(n[1]=R(()=>V(),["slash"]))]}),t(u)&&!t(e)?(s(),g(D,{key:0,class:"flex flex-col justify-center items-center gap-5 h-[95vh]"},{default:o(()=>[a(ee,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"5"})]),_:1})):(s(),h("div",Ie,[t(x)>205?(s(),g(D,{key:0},{default:o(()=>[a(be)]),_:1})):C("",!0),t(x)<205?(s(),g(D,{key:1,style:ie({backgroundColor:(A=t(e))==null?void 0:A.backgroundColor}),class:"h-screen overflow-x-auto"},{default:o(()=>{var T,M,P;return[(T=t(e))!=null&&T.closed?(s(),g(Be,{key:0,workspaceId:(M=t(e))==null?void 0:M.workspace.id,modelValue:B.value,"onUpdate:modelValue":n[2]||(n[2]=S=>B.value=S)},null,8,["workspaceId","modelValue"])):(s(),h("div",Ve,[m("div",De,[t(e)?(s(),g(me,{key:0},{default:o(()=>[a(t(f),{"is-workspace-premium":t(e).workspace.isPremium},null,8,["is-workspace-premium"])]),_:1})):C("",!0)])])),a(t(v),{"is-loading":t(u),modelValue:B.value,"onUpdate:modelValue":n[3]||(n[3]=S=>B.value=S),name:(P=t(e))==null?void 0:P.name,onDelete:J},null,8,["is-loading","modelValue","name"])]}),_:1},8,["style"])):C("",!0)]))],64)}}},Ce=N(Se,[["__scopeId","data-v-4ec68c3b"]]);export{Ce as default};
