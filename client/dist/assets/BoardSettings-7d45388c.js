import K from"./DeleteModal-b067f3cd.js";import{aC as I,aD as M,r,O as W,Q as X,c as n,o as P,d as Y,f as t,g as l,w as a,e as $,I as N,h as Z,i as ee,k as p,t as le,F as te,l as V,ai as y,n as C}from"./index-2e258987.js";const oe={class:"w-full flex items-center"},ae=t("h2",{class:"text-xl text-center w-full"},"Board Settings",-1),se={class:"px-4 pt-5"},ne=t("p",null,"Background color",-1),de={class:"w-full"},re=t("div",null,[t("h3",{class:"text-xl font-bold"},"Public"),t("p",null," All members in the workspace can view this board and contribute to it ")],-1),ie=t("div",null,[t("h3",{class:"text-xl font-bold"},"Private"),t("p",null," Only members added to the board can view this board and contribute to it ")],-1),ue={class:"flex flex-row justify-end gap-5"},ce={class:"py-2"},ve={class:"flex justify-between items-center"},me=t("h1",{class:"px-5 py-3 text-xl"},"Delete Board?",-1),pe={class:"font-bold text-lg"},be=t("p",null,"Things to know:",-1),_e=t("ul",{class:"decoration-dotted list-disc px-5"},[t("li",{class:"decoration-dotted"}," This is permanent and can't be undone. "),t("li",null," All the data related to this board will be permanently deleted ")],-1),fe=t("p",{class:"pt-5 pb-1"},"Enter the board name to delete it",-1),xe={__name:"BoardSettings",props:I({workspaceAllMembers:Array},{boardSettingsDialog:{},boardSettingsDialogModifiers:{},board:{},boardModifiers:{}}),emits:I(["success"],["update:boardSettingsDialog","update:board"]),setup(b,{emit:E}){const T=M(b,"boardSettingsDialog"),s=M(b,"board"),_=E,c=r(!1),f=W(),w=r(s.value.name),g=r(s.value.description),x=r(s.value.backgroundColor),v=r(s.value.isPrivate),h=r(s.value.members),k=r(""),B=X(),m=r(!1),i=r(!1),j=()=>{i.value=!0,V.put(`/b/${f.params.boardId}`,{workspace:s.value.workspace.id,closed:!0},{withCredentials:!0}).then(d=>{_("success"),y.emit("change-board-info",s.value.id),B.go(`/workspace/${s.value.workspace.id}`)}).catch(d=>{C(d)}).finally(()=>{i.value=!1})},O=()=>{i.value=!0,V.put(`/b/${f.params.boardId}`,{name:w.value,description:g.value,backgroundColor:x.value,isPrivate:v.value,members:h.value||[],workspace:s.value.workspace.id},{withCredentials:!0}).then(d=>{y.emit("change-board-info",s.value._id),_("success")}).catch(d=>{C(d)}).finally(()=>{i.value=!1})},z=()=>{i.value=!0,V.delete(`/b/${f.params.boardId}`,{withCredentials:!0}).then(d=>{_("success"),y.emit("change-board-info",s.value.id),B.push("/")}).catch(d=>{C(d)}).finally(()=>{i.value=!1})};return(d,e)=>{const u=n("v-btn"),D=n("v-divider"),U=n("v-text-field"),F=n("v-textarea"),R=n("v-color-picker"),S=n("v-radio"),L=n("v-radio-group"),Q=n("v-select"),q=n("v-card-text"),G=n("v-col"),H=n("v-row"),J=n("v-card"),A=n("v-dialog");return P(),Y(te,null,[t("div",oe,[ae,l(u,{variant:"text",class:"justify-self-end",icon:"",size:"35",onClick:e[0]||(e[0]=()=>T.value=!1)},{default:a(()=>[l($(N),{icon:"ph:x"})]),_:1})]),l(D),t("div",se,[l(U,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=o=>w.value=o),label:"Board name"},null,8,["modelValue"]),l(F,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),label:"Board description"},null,8,["modelValue"]),ne,t("div",de,[l(R,{class:"min-w-full",modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=o=>x.value=o),"hide-canvas":"",modes:["rgb","hsl","hex"],"show-swatches":""},null,8,["modelValue"])]),l(L,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=o=>v.value=o)},{default:a(()=>[l(S,{label:"Public",value:!1,class:"py-2"},{label:a(()=>[re]),_:1}),l(S,{label:"Private",value:!0,class:"py-2"},{label:a(()=>[ie]),_:1})]),_:1},8,["modelValue"]),v.value?(P(),Z(Q,{key:0,modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=o=>h.value=o),items:b.workspaceAllMembers,multiple:"",label:"members","item-title":"name","item-value":"id"},null,8,["modelValue","items"])):ee("",!0),t("div",ue,[l(u,{color:"primary",onClick:O},{default:a(()=>[p("Update")]),_:1})]),l(D,{class:"py-2"}),t("div",null,[l(u,{color:"error",onClick:e[6]||(e[6]=o=>m.value=!0)},{default:a(()=>[p(" Close board ")]),_:1})]),t("div",ce,[l(u,{color:"error",onClick:e[7]||(e[7]=o=>c.value=!0)},{default:a(()=>[p(" Delete board ")]),_:1})])]),l(A,{modelValue:c.value,"onUpdate:modelValue":e[10]||(e[10]=o=>c.value=o)},{default:a(()=>[l(J,{class:"self-center h-full overflow-hidden",rounded:"lg"},{default:a(()=>[l(H,{class:"max-w-[500px]"},{default:a(()=>[l(G,{cols:"12",lg:"12",class:""},{default:a(()=>[t("div",ve,[me,l(u,{onClick:e[8]||(e[8]=()=>c.value=!1),size:"x-small",class:"right-5",icon:"",variant:"text"},{default:a(()=>[l($(N),{icon:"ph:x",width:"25"})]),_:1})]),l(q,null,{default:a(()=>[t("p",pe,' Enter the board name "'+le(s.value.name)+'" to delete ',1),be,_e,fe,l(U,{density:"compact",modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=o=>k.value=o)},null,8,["modelValue"]),l(u,{class:"w-full",color:"error",disabled:k.value!==s.value.name,variant:"outlined",onClick:z},{default:a(()=>[p("delete")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(A,{modelValue:m.value,"onUpdate:modelValue":e[13]||(e[13]=o=>m.value=o),width:"500"},{default:a(()=>[l(K,{title:"Are you sure you want to close this board?",text:"After closing this board you will not be able to modify it.","action-btn-text":"Close",onDelete:e[11]||(e[11]=()=>j()),onCancel:e[12]||(e[12]=()=>m.value=!1)})]),_:1},8,["modelValue"])],64)}}};export{xe as default};
