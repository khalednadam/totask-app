import{A as J,_ as G}from"./AddNewBoardButton-47403174.js";import{u as K,r as S,a as Q,b as N,c as r,o as s,d as c,e as a,f as _,g as e,w as t,I as k,t as T,h as i,i as B,m as W,R as D,F as h,j as b,k as w,_ as P,l as X,n as Y,p as Z,q as ee,s as te,v as se,x as ae,y as oe,z as le}from"./index-f3c818bc.js";import{u as re}from"./favoriteBoards-23c049b9.js";const ne={class:"flex mb-10 flex-col"},ce={class:"flex items-center pb-3 space-x-2"},ie={class:"font-normal"},de={class:"flex items-center gap-2"},ue=_("p",null," Get premium ",-1),me={class:"flex justify-between items-center"},_e={key:1},fe=_("p",{class:"text-sm opacity-75 font-bold"}," Get the most out of totask! ",-1),ve={class:"list-disc flex flex-col items-start mx-auto w-max justify-end"},pe={__name:"WorkspaceSummary",props:{workspace:Object,favoriteBoards:Array},setup(l){const u=l,C=K(),f=S(!1),{boards:g,isLoading:j}=Q(u.workspace.id,"updatedAt:desc",7),{isAdmin:$}=N(u.workspace,C.user.id),y=S(!1),m=S(!1),I=["Unlimited boards","Unlimited members","List colors","And more coming soon.."],q=async()=>{m.value=!0;try{await X.post("/premium-request/create",{workspace:u.workspace.id,user:C.user.id}),u.workspace.premiumRequested=!0}catch(V){Y(V)}finally{m.value=!1,y.value=!1}};return(V,n)=>{const M=r("v-avatar"),v=r("v-btn"),z=r("v-tooltip"),A=r("v-skeleton-loader"),x=r("v-col"),d=r("v-card-text"),p=r("v-card"),O=r("v-row"),R=r("v-card-title"),F=r("v-list-subheader"),U=r("v-list"),L=r("v-dialog"),H=r("v-img");return s(),c("div",ne,[(s(),c("div",{class:"flex items-center space-x-2 justify-between",key:a(g)},[_("div",ce,[e(M,{color:"grey",rounded:"lg",size:"large",class:"w-full"},{default:t(()=>[e(a(k),{icon:"ph:building-office",width:"30"})]),_:1}),_("h4",ie,T(l.workspace.name),1),l.workspace.isPremium?(s(),i(a(k),{key:0,icon:"ph:crown-simple-fill",width:"20",color:"gold"})):B("",!0)]),_("div",de,[a($)||l.workspace.canMemberAddBoards?(s(),i(J,{key:0,"is-card":!1,workspace:l.workspace.id,onClick:()=>{},members:l.workspace.members,boards:a(g)},null,8,["workspace","members","boards"])):B("",!0),a($)?(s(),i(a(D),{key:1,to:`/w/settings/${l.workspace.id}`},{default:t(()=>[e(z,{text:"Settings"},{activator:t(({props:o})=>[a(N)(l.workspace,a(C).user.id)?(s(),i(v,W({key:0},o,{icon:"",variant:"tonal",size:"small"}),{default:t(()=>[e(a(k),{icon:"ph:gear",width:"20"})]),_:2},1040)):B("",!0)]),_:1})]),_:1},8,["to"])):B("",!0),e(z,{text:"Members"},{activator:t(({props:o})=>[e(v,W(o,{icon:"",variant:"tonal",size:"small",onClick:n[0]||(n[0]=()=>f.value=!0)}),{default:t(()=>[e(a(k),{icon:"ph:user",width:"20"})]),_:2},1040)]),_:1}),l.workspace.isPremium?B("",!0):(s(),i(v,{key:2,disabled:l.workspace.premiumRequested,onClick:n[1]||(n[1]=o=>y.value=!0),variant:"tonal",class:"!h-10"},{default:t(()=>[e(a(k),{icon:"ph:crown-simple",width:"20"}),ue]),_:1},8,["disabled"]))])])),e(O,null,{default:t(()=>[a(j)?(s(),c(h,{key:0},b(3,o=>e(x,{cols:"12",md:"3",key:o},{default:t(()=>[e(A,{class:"h-[125px] overflow-hidden rounded-lg",rounded:"lg",type:"card"})]),_:2},1024)),64)):(s(!0),c(h,{key:1},b(a(g),o=>(s(),i(x,{cols:"12",md:"3",key:o.id},{default:t(()=>[(s(),i(G,{key:o.id,board:o},null,8,["board"]))]),_:2},1024))),128)),e(x,{cols:"12",md:"3"},{default:t(()=>[e(a(D),{to:`/w/${l.workspace.id}`},{default:t(()=>[e(p,{height:"120",class:"cursor-pointer",variant:"tonal"},{default:t(()=>[e(d,{class:"flex justify-center items-center flex-col h-full opacity-100"},{default:t(()=>[w(" See All ")]),_:1})]),_:1})]),_:1},8,["to"])]),_:1})]),_:1}),e(L,{class:"max-w-[500px]",modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=o=>f.value=o)},{default:t(()=>[e(p,null,{default:t(()=>[e(d,{class:"relative"},{default:t(()=>[_("div",me,[e(R,null,{default:t(()=>[w(" Workspace Members ")]),_:1}),e(v,{onClick:n[2]||(n[2]=()=>f.value=!1),size:"x-small",class:"absolute right-0 bottom-0",icon:"",variant:"text"},{default:t(()=>[e(a(k),{icon:"ph:x",width:"25"})]),_:1})]),e(U,{class:"space-y-3"},{default:t(()=>[e(F,null,{default:t(()=>[w(" Admins ")]),_:1}),(s(!0),c(h,null,b(l.workspace.admins,o=>(s(),i(P,{key:o.id,member:o},null,8,["member"]))),128))]),_:1}),l.workspace.members.length>0?(s(),i(U,{key:0,class:"space-y-3"},{default:t(()=>[e(F,null,{default:t(()=>[w(" Members ")]),_:1}),(s(!0),c(h,null,b(l.workspace.members,o=>(s(),i(P,{key:o.id,member:o},null,8,["member"]))),128))]),_:1})):(s(),c("p",_e,"There are no members in this workspace"))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:y.value,"onUpdate:modelValue":n[6]||(n[6]=o=>y.value=o),class:"md:max-w-[30vw] w-full"},{default:t(()=>[e(p,null,{default:t(()=>[e(v,{variant:"text",class:"!absolute right-1 top-1 z-50",icon:"",size:"35",onClick:n[4]||(n[4]=()=>y.value=!1)},{default:t(()=>[e(a(k),{icon:"ph:x"})]),_:1}),e(H,{class:"align-end text-white",height:"120",src:"/premiumbg.png",cover:""}),e(R,{class:"text-center"},{default:t(()=>[w(" Get totask premium "),fe]),_:1}),e(d,null,{default:t(()=>[_("ul",ve,[(s(),c(h,null,b(I,o=>_("li",null,T(o),1)),64))]),e(v,{onClick:q,loading:m.value,disabled:m.value||l.workspace.premiumRequested,color:"primary",class:"w-full mt-5",flat:""},{default:t(()=>[w(" Request totask premium ")]),_:1},8,["loading","disabled"]),e(v,{color:"primary",class:"w-full",variant:"text",flat:"",onClick:n[5]||(n[5]=()=>y.value=!1)},{default:t(()=>[w(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};const E=l=>(oe("data-v-563045dd"),l=l(),le(),l),ke={key:0,class:"flex flex-col justify-center items-center gap-5 h-[95vh]"},we={key:1},ge={class:"flex items-center pb-3 space-x-2"},ye=E(()=>_("h4",{class:"font-normal"},"Favorite Boards",-1)),he={key:2,class:"flex flex-col justify-center items-center gap-5 h-[95vh]"},be=E(()=>_("h2",null," There are no workspaces ",-1)),xe={__name:"Boards",setup(l){const u=re(),C=ee(),f=S(!1),{recentWorkspaces:g,isLoading:j}=te(C),$=S([]);return se(async()=>{await u.getFavoriteBoards(),$.value=u.favoriteBoards}),(y,m)=>{const I=r("v-progress-circular"),q=r("v-avatar"),V=r("v-col"),n=r("v-row"),M=r("v-btn"),v=r("v-dialog"),z=r("v-container");return a(j)?(s(),c("div",ke,[e(I,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"5"})])):(s(),c("div",we,[e(z,null,{default:t(()=>{var A,x;return[((A=a(u).favoriteBoards)==null?void 0:A.length)>0?(s(),i(n,{key:0,class:"mb-3"},{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[_("div",ge,[e(q,{color:"grey",rounded:"lg",size:"large",class:"w-full"},{default:t(()=>[e(a(k),{icon:"ph:star-fill",width:"30"})]),_:1}),ye]),e(n,{class:""},{default:t(()=>{var d;return[(s(!0),c(h,null,b((d=a(u))==null?void 0:d.favoriteBoards,p=>(s(),i(V,{cols:"12",md:"3"},{default:t(()=>[e(G,{board:p},null,8,["board"])]),_:2},1024))),256))]}),_:1})]),_:1})]),_:1})):B("",!0),((x=a(g))==null?void 0:x.length)>0&&a(g)?(s(!0),c(h,{key:1},b(a(g),d=>{var p;return s(),c("div",{class:"w-full",key:d},[(s(),i(pe,{key:$.value||a(u),workspace:d,favoriteBoards:(p=a(u))==null?void 0:p.favoriteBoards},null,8,["workspace","favoriteBoards"]))])}),128)):(s(),c("div",he,[be,e(M,{size:"large",variant:"flat",color:"primary",onClick:m[0]||(m[0]=d=>f.value=!0)},{default:t(()=>[w(" Create workspace ")]),_:1}),e(v,{modelValue:f.value,"onUpdate:modelValue":m[2]||(m[2]=d=>f.value=d)},{default:t(()=>[e(ae,{onToggleModal:m[1]||(m[1]=()=>f.value=!1)})]),_:1},8,["modelValue"])]))]}),_:1})]))}}},Ve=Z(xe,[["__scopeId","data-v-563045dd"]]);export{Ve as default};
