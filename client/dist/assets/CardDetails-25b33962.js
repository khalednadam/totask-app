import{aG as Ua,aH as Ma,aI as ja,aJ as Aa,aK as Ea,aL as Pa,aM as Oa,F as ke,aN as Ra,aO as Fa,aP as Ba,ay as za,an as Na,aQ as Ha,aR as qa,aa as Ka,aS as Qa,aT as Ga,aU as Wa,aV as Ja,aW as Xa,aX as Ya,aY as Za,aZ as en,a_ as tn,a$ as an,U as De,b0 as nn,h as X,i as se,d as O,f as _,b1 as ln,b2 as sn,b3 as on,b4 as rn,al as Mt,aB as dn,k as V,g as s,b5 as cn,az as un,A as fn,b6 as mn,b7 as pn,b8 as vn,b9 as hn,ba as bn,bb as _n,bc as gn,bd as Cn,be as yn,bf as wn,bg as kn,Y as xn,at as In,bh as Sn,a5 as Dn,C as Vn,bi as $n,bj as Tn,bk as Ln,bl as Un,bm as Mn,a1 as jn,bn as An,K as En,bo as Pn,bp as On,Z as na,bq as Rn,br as Fn,bs as Bn,bt as zn,bu as Nn,aC as _e,m as re,J as Hn,a9 as qn,a4 as Kn,ag as Qn,bv as Gn,bw as Wn,$ as Jn,aq as Xn,bx as Yn,by as Zn,v as la,bz as el,bA as tl,au as al,bB as nl,E as sa,bC as ll,o as g,z as jt,a2 as sl,bD as ol,y as At,bE as il,M as rl,a0 as dl,r as j,bF as cl,ao as ul,j as Ve,am as fl,c as p,ax as Ze,ap as ml,bG as pl,bH as vl,bI as hl,bJ as bl,bK as _l,bL as gl,bM as Cl,B as yl,bN as wl,bO as kl,bP as xl,t as ce,bQ as Il,bR as Sl,H as Dl,ak as Vl,bS as $l,X as Tl,bT as Ll,bU as Ul,e as f,bV as Ml,bW as jl,bX as Al,aD as xe,bY as El,aj as Pl,bZ as Ol,b_ as Rl,b$ as Fl,c0 as Bl,c1 as zl,c2 as Nl,as as Hl,D as ql,c3 as Kl,G as oa,S as Ql,c4 as Gl,c5 as Wl,aE as ia,w as i,c6 as Jl,ar as et,V as vt,c7 as Xl,W as Yl,c8 as Zl,T as Et,I as K,l as W,ai as I,N as ht,n as de,p as Pt,u as es,L as ts,c9 as as,ca as ns,s as ls,cb as ss,cc as os}from"./index-2e258987.js";import{C as is,u as rs}from"./Board-44fa2c3b.js";import{t as ds}from"./vue-draggable-plus-d4a65b61.js";import cs from"./DeleteModal-b067f3cd.js";import{Q as us}from"./vue-quill.esm-bundler-493b78e8.js";import"./favoriteBoards-54f84581.js";/**
* vue v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const fs=()=>{},ms=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Ua,BaseTransitionPropsValidators:Ma,Comment:ja,DeprecationTypes:Aa,EffectScope:Ea,ErrorCodes:Pa,ErrorTypeStrings:Oa,Fragment:ke,KeepAlive:Ra,ReactiveEffect:Fa,Static:Ba,Suspense:za,Teleport:Na,Text:Ha,TrackOpTypes:qa,Transition:Ka,TransitionGroup:Qa,TriggerOpTypes:Ga,VueElement:Wa,assertNumber:Ja,callWithAsyncErrorHandling:Xa,callWithErrorHandling:Ya,camelize:Za,capitalize:en,cloneVNode:tn,compatUtils:an,compile:fs,computed:De,createApp:nn,createBlock:X,createCommentVNode:se,createElementBlock:O,createElementVNode:_,createHydrationRenderer:ln,createPropsRestProxy:sn,createRenderer:on,createSSRApp:rn,createSlots:Mt,createStaticVNode:dn,createTextVNode:V,createVNode:s,customRef:cn,defineAsyncComponent:un,defineComponent:fn,defineCustomElement:mn,defineEmits:pn,defineExpose:vn,defineModel:hn,defineOptions:bn,defineProps:_n,defineSSRCustomElement:gn,defineSlots:Cn,devtools:yn,effect:wn,effectScope:kn,getCurrentInstance:xn,getCurrentScope:In,getTransitionRawChildren:Sn,guardReactiveProps:Dn,h:Vn,handleError:$n,hasInjectionContext:Tn,hydrate:Ln,initCustomFormatter:Un,initDirectivesForSSR:Mn,inject:jn,isMemoSame:An,isProxy:En,isReactive:Pn,isReadonly:On,isRef:na,isRuntimeOnly:Rn,isShallow:Fn,isVNode:Bn,markRaw:zn,mergeDefaults:Nn,mergeModels:_e,mergeProps:re,nextTick:Hn,normalizeClass:qn,normalizeProps:Kn,normalizeStyle:Qn,onActivated:Gn,onBeforeMount:Wn,onBeforeUnmount:Jn,onBeforeUpdate:Xn,onDeactivated:Yn,onErrorCaptured:Zn,onMounted:la,onRenderTracked:el,onRenderTriggered:tl,onScopeDispose:al,onServerPrefetch:nl,onUnmounted:sa,onUpdated:ll,openBlock:g,popScopeId:jt,provide:sl,proxyRefs:ol,pushScopeId:At,queuePostFlushCb:il,reactive:rl,readonly:dl,ref:j,registerRuntimeCompiler:cl,render:ul,renderList:Ve,renderSlot:fl,resolveComponent:p,resolveDirective:Ze,resolveDynamicComponent:ml,resolveFilter:pl,resolveTransitionHooks:vl,setBlockTracking:hl,setDevtoolsHook:bl,setTransitionHooks:_l,shallowReactive:gl,shallowReadonly:Cl,shallowRef:yl,ssrContextKey:wl,ssrUtils:kl,stop:xl,toDisplayString:ce,toHandlerKey:Il,toHandlers:Sl,toRaw:Dl,toRef:Vl,toRefs:$l,toValue:Tl,transformVNodeArgs:Ll,triggerRef:Ul,unref:f,useAttrs:Ml,useCssModule:jl,useCssVars:Al,useModel:xe,useSSRContext:El,useSlots:Pl,useTransitionState:Ol,vModelCheckbox:Rl,vModelDynamic:Fl,vModelRadio:Bl,vModelSelect:zl,vModelText:Nl,vShow:Hl,version:ql,warn:Kl,watch:oa,watchEffect:Ql,watchPostEffect:Gl,watchSyncEffect:Wl,withAsyncContext:ia,withCtx:i,withDefaults:Jl,withDirectives:et,withKeys:vt,withMemo:Xl,withModifiers:Yl,withScopeId:Zl},Symbol.toStringTag,{value:"Module"})),ps={class:"flex gap-2 justify-end items-center"},vs=_("p",{class:"text-center text-sm"}," Add checklist ",-1),hs=_("p",{class:"text-xs"}," Checklist title ",-1),bs={class:"flex justify-end items-center gap-2"},_s={__name:"AddChecklistCard",props:{checklist:Object,listId:String,boardId:String,cardId:String},emits:["addChecklist","updateCard"],setup(h,{emit:te}){const u=h,$=te,b=j(""),C=j(!1),k=Et(),T=async()=>{try{const v=await W.put(`/card/addChecklist/${u.cardId}`,{name:b.value},{withCredentials:!0});$("updateCard",v.data),k.success("checklist was added successfully"),I.emit("update-cards",u.boardId,[u.listId]),I.emit("update-card",u.cardId),C.value=!1}catch(v){console.log(v)}},l=async()=>{try{const v=await W.put(`/card/removeChecklist/${u.cardId}`,{},{withCredentials:!0});$("updateCard",v.data),k.success("Checklist was removed"),C.value=!1,I.emit("update-cards",u.boardId,[u.listId]),I.emit("update-card",u.cardId)}catch(v){console.log(v)}};return(v,w)=>{const L=p("v-btn"),A=p("v-card-text"),z=p("v-text-field"),q=p("v-card"),R=p("v-menu");return g(),X(R,{modelValue:C.value,"onUpdate:modelValue":w[3]||(w[3]=B=>C.value=B),"close-on-content-click":!1,location:"end"},{activator:i(({props:B})=>[s(L,re(B,{class:"w-full",variant:"tonal"}),{prepend:i(()=>[s(f(K),{icon:h.checklist?"ph:x-square":"ph:check-square-offset",width:"20"},null,8,["icon"])]),default:i(()=>[_("p",null,ce(h.checklist?"Remove Checklist":"Checklist"),1)]),_:2},1040)]),default:i(()=>[s(q,{class:"",width:300},{default:i(()=>[h.checklist?(g(),X(A,{key:0},{default:i(()=>[V(" Are you sure you want to remove this checklist? "),_("div",ps,[s(L,{onClick:w[0]||(w[0]=B=>C.value=!1),variant:"outlined"},{default:i(()=>[V(" Cancel ")]),_:1}),s(L,{color:"error",variant:"tonal",onClick:l},{default:i(()=>[V(" Remove ")]),_:1})])]),_:1})):(g(),X(A,{key:1},{default:i(()=>[vs,hs,s(z,{"hide-details":"",class:"my-2",modelValue:b.value,"onUpdate:modelValue":w[1]||(w[1]=B=>b.value=B)},null,8,["modelValue"]),_("div",bs,[s(L,{onClick:w[2]||(w[2]=B=>C.value=!1),variant:"outlined"},{default:i(()=>[V(" Cancel ")]),_:1}),s(L,{onClick:T,variant:"tonal"},{default:i(()=>[V(" Add ")]),_:1})])]),_:1}))]),_:1})]),_:1},8,["modelValue"])}}},gs={key:0,class:"h-24"},Cs=["href"],ys={class:"font-bold"},ws={class:"text-xs"},ks={class:"flex gap-1 justify-start items-center"},xs={class:"text-xs cursor-pointer underline"},Is=["href"],Ss={__name:"Attachment",props:{src:String,cardId:String,listId:String},emits:["updateCard"],setup(h,{emit:te}){const u=h,$=te,b=u.src.replace("https://","http://").replace(/[ +#]/g,v=>"%"+v.charCodeAt(0).toString(16).toUpperCase()),C={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},k=u.src.slice(96),T=new Date(Date(u.src.slice(41))).toLocaleString("en-GB",C),l=()=>{W.put(`/card/deleteAttachment/${u.cardId}`,{attachmentToDelete:u.src},{withCredentials:!0}).then(v=>{$("updateCard",v.data),I.emit("update-card",u.cardId),I.emit("update-cards",u.cardId,[u.listId])}).catch(v=>{console.log(v)})};return(v,w)=>{const L=p("v-img"),A=p("v-avatar"),z=p("v-col"),q=p("v-row");return g(),X(q,null,{default:i(()=>[s(z,{cols:"4"},{default:i(()=>[s(L,{src:h.src,rounded:"lg"},null,8,["src"]),h.src.slice(-3)==="pdf"?(g(),O("div",gs,[_("a",{href:`${f(b)}`},[s(A,{color:"primary",rounded:"lg",size:"100%",class:"w-full bg-red"},{default:i(()=>[V(" PDF ")]),_:1})],8,Cs)])):se("",!0)]),_:1}),s(z,{cols:"8"},{default:i(()=>[_("p",ys,ce(f(k)),1),_("p",ws," at "+ce(f(T)),1),_("div",ks,[_("p",xs,[_("a",{href:`${f(b)}`,rel:"external",target:"_blank"}," View ",8,Is)]),_("p",{class:"text-xs underline cursor-pointer",onClick:l}," Delete ")])]),_:1})]),_:1})}}},Ds={class:"flex justify-end gap-2"},ta={__name:"CardMembersInput",props:_e({cardId:String,members:Array,mini:Boolean},{modelValue:{},modelModifiers:{}}),emits:_e(["updateCardAssignees","updateCard"],["update:modelValue"]),setup(h,{emit:te}){const u=xe(h,"modelValue"),$=h,b=te,C=j(!1),k=()=>{W.put(`/card/assignees/${$.cardId}`,{assignees:u.value},{withCredentials:!0}).then(T=>{C.value=!1,b("updateCard",T.data),I.emit("update-card",$.cardId)}).catch(T=>{de(T)})};return(T,l)=>{const v=p("v-btn"),w=p("v-chip"),L=p("v-list-item"),A=p("v-autocomplete"),z=p("v-card-text"),q=p("v-card"),R=p("v-menu");return g(),X(R,{modelValue:C.value,"onUpdate:modelValue":l[3]||(l[3]=B=>C.value=B),"close-on-content-click":!1,location:"end"},{activator:i(({props:B})=>[h.mini?(g(),X(v,re({key:0,icon:"",rounded:"full",color:"onbackground",size:32},B,{class:"w-full",variant:"tonal"}),{default:i(()=>[s(f(K),{icon:"ph:plus"})]),_:2},1040)):(g(),X(v,re({key:1},B,{class:"w-full",variant:"tonal"}),{prepend:i(()=>[s(f(K),{icon:"ph:user",width:"20"})]),default:i(()=>[V(" Members ")]),_:2},1040))]),default:i(()=>[s(q,null,{default:i(()=>[s(z,null,{default:i(()=>[s(A,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=B=>u.value=B),items:h.members,chips:"","closable-chips":"","item-title":"name","return-object":"",label:"Assignees",multiple:""},{chip:i(({props:B,item:P})=>[s(w,re(B,{text:P.raw.name}),{prepend:i(()=>[s(ht,{user:P.raw},null,8,["user"])]),_:2},1040,["text"])]),item:i(({props:B,item:P})=>[s(L,re(B,{title:P.raw.name,subtitle:P.raw.username}),{prepend:i(()=>[s(ht,{user:P.raw},null,8,["user"])]),_:2},1040,["title","subtitle"])]),_:1},8,["modelValue","items"]),_("div",Ds,[s(v,{color:"primary",variant:"outlined",onClick:l[1]||(l[1]=B=>C.value=!1)},{default:i(()=>[V(" Cancel ")]),_:1}),s(v,{color:"primary",onClick:l[2]||(l[2]=()=>{k(),C.value=!1})},{default:i(()=>[V(" Save ")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Vs={key:1,class:"w-full"},$s={class:"flex justify-end gap-2 mt-2 items-center"},Ot={__name:"ChangeableText",props:{modelValue:{},modelModifiers:{}},emits:_e(["update"],["update:modelValue"]),setup(h,{emit:te}){const u=xe(h,"modelValue"),$=j(!1);return(b,C)=>{const k=p("v-text-field"),T=p("v-btn"),l=Ze("click-outside");return g(),O("div",null,[$.value?et((g(),O("div",Vs,[s(k,{"hide-details":"",modelValue:u.value,"onUpdate:modelValue":C[1]||(C[1]=v=>u.value=v)},null,8,["modelValue"]),_("div",$s,[s(T,{variant:"tonal",size:"small",height:"35",width:"35",icon:"",onClick:C[2]||(C[2]=v=>$.value=!1)},{default:i(()=>[s(f(K),{icon:"ph:x"})]),_:1}),s(T,{onClick:C[3]||(C[3]=()=>{b.$emit("update"),$.value=!1}),variant:"tonal",disabled:u.value.trim().length<1},{default:i(()=>[V(" Update ")]),_:1},8,["disabled"])])])),[[l,()=>$.value=!1]]):(g(),O("p",{key:0,onClick:C[0]||(C[0]=v=>$.value=!0)},ce(u.value),1))])}}};const ra=h=>(At("data-v-7af04837"),h=h(),jt(),h),Ts={class:"flex items-center"},Ls=ra(()=>_("p",null,"Convert to card",-1)),Us={class:"flex items-center"},Ms=ra(()=>_("p",null,"Delete",-1)),js={__name:"ChecklistItem",props:{checklistItem:Object,listId:String,boardId:String},emits:["updateChecklistItem","deleteChecklistItem"],setup(h,{emit:te}){const u=h,$=j(u.checklistItem.title),b=te,C=j(!1),k=()=>{b("updateChecklistItem",$.value,u.checklistItem.isChecked),C.value=!1},T=()=>{W.post("/card/create",{board:u.boardId,list:u.listId,title:u.checklistItem.title},{withCredentials:!0}).then(l=>{b("deleteChecklistItem",u.checklistItem.id),I.emit("update-cards",u.boardId,[u.listId])}).catch(l=>{de(l)})};return(l,v)=>{const w=p("v-checkbox"),L=p("v-btn"),A=p("v-list-item"),z=p("v-list"),q=p("v-menu");return g(),X(A,{density:"compact",class:"flex items-center justify-center"},{prepend:i(()=>[s(w,{class:"self-start",onChange:v[0]||(v[0]=R=>l.$emit("updateChecklistItem",$.value,h.checklistItem.isChecked)),color:"primary",density:"compact",modelValue:h.checklistItem.isChecked,"onUpdate:modelValue":v[1]||(v[1]=R=>h.checklistItem.isChecked=R),"hide-details":""},null,8,["modelValue"])]),default:i(()=>[s(Ot,{modelValue:$.value,"onUpdate:modelValue":v[2]||(v[2]=R=>$.value=R),class:"w-full",onUpdate:v[3]||(v[3]=()=>k())},null,8,["modelValue"]),s(q,null,{activator:i(({props:R})=>[s(L,re(R,{icon:"",variant:"text",size:"x-small"}),{default:i(()=>[s(f(K),{icon:"ph:dots-three-outline-fill",width:"20"})]),_:2},1040)]),default:i(()=>[s(z,null,{default:i(()=>[s(A,{onClick:T,density:"compact",class:"flex flex-row items-center",rounded:!1},{default:i(()=>[_("div",Ts,[s(f(K),{icon:"ph:copy",width:"25"}),Ls])]),_:1}),s(A,{onClick:v[4]||(v[4]=R=>l.$emit("deleteChecklistItem",h.checklistItem.id)),"base-color":"error",density:"compact",class:"flex flex-row items-center",rounded:!1},{default:i(()=>[_("div",Us,[s(f(K),{icon:"ph:trash",width:"25"}),Ms])]),_:1})]),_:1})]),_:1})]),_:1})}}},As=Pt(js,[["__scopeId","data-v-7af04837"]]);const Es=h=>(At("data-v-c9d631e0"),h=h(),jt(),h),Ps={class:""},Os={class:"flex justify-between items-center"},Rs={class:"flex items-start w-full gap-2"},Fs={class:"flex items-center"},Bs=Es(()=>_("p",null,"Delete",-1)),zs={class:"flex items-center justify-start mt-2 w-full"},Ns={class:"w-9 text-xs"},Hs={key:1,class:"ml-5"},qs={class:"flex flex-row gap-2 justify-end items-center"},Ks={__name:"Checklist",props:_e({boardId:String,cardId:String,listId:String},{modelValue:{},modelModifiers:{}}),emits:_e(["updateCardChecklist","updateCard"],["update:modelValue"]),setup(h,{emit:te}){const u=xe(h,"modelValue"),$=j(null),b=h,C=te,k=Et(),T=j(""),l=j(!1),v=j(u.value.name),w=De(()=>{var S;return Math.floor((u.value.checkedItemsCount/((S=u.value.checklistItems)==null?void 0:S.length)||0)*100)}),L=async(S,U,F)=>{if(!(U.trim().length<1))try{const H=await W.put(`/checklist/item/${S}`,{title:U,isChecked:F,checklistId:u.value.id},{params:{boardId:b.boardId},withCredentials:!0});C("updateCardChecklist",H.data),I.emit("update-cards",b.boardId,[b.listId]),I.emit("update-card",b.cardId)}catch(H){console.log(H)}},A=async(S,U)=>{try{const F=await W.put(`/checklist/item/${S}`,{checklistId:u.value.id,position:U},{params:{boardId:b.boardId},withCredentials:!0});I.emit("update-cards",b.boardId,[b.listId]),I.emit("update-card",b.cardId)}catch(F){console.log(F)}},z=async()=>{if(!(T.value.trim().length<1))try{const S=await W.post(`/checklist/item/${u.value.id}`,{title:T.value},{params:{boardId:b.boardId},withCredentials:!0});C("updateCardChecklist",S.data),I.emit("update-cards",b.boardId,[b.listId]),I.emit("update-card",b.cardId),T.value=""}catch(S){console.log(S)}},q=async S=>{try{const U=await W.delete(`/checklist/item/${S}`,{params:{checklistId:u.value.id,boardId:b.boardId},withCredentials:!0});C("updateCardChecklist",U.data),I.emit("update-cards",b.boardId,[b.listId]),I.emit("update-card",b.cardId)}catch(U){console.log(U)}},R=async()=>{try{const S=await W.put(`/card/removeChecklist/${b.cardId}`,{},{withCredentials:!0});C("updateCard",S.data),I.emit("update-card",b.cardId),I.emit("update-cards",b.boardId,[b.listId]),k.success("Checklist was removed")}catch(S){console.log(S)}},B=async()=>{try{const S=await W.put(`api/checklist/${u.value.id}`,{name:v.value},{params:{boardId:b.boardId},withCredentials:!0})}catch(S){console.log(S)}},P=S=>{let U=S.newIndex,F=u.value.checklistItems[U-1],H=u.value.checklistItems[U+1],ge=u.value.checklistItems[U].position;F&&H?ge=(F.position+H.position)/2:F?ge=F.position+F.position/2:H&&(ge=H.position/2),A(S.item.id,ge)};return(S,U)=>{const F=p("v-btn"),H=p("v-list-item"),oe=p("v-list"),ge=p("v-menu"),le=p("v-progress-linear"),ie=p("v-text-field"),ye=Ze("click-outside");return g(),O("div",Ps,[_("div",Os,[_("div",Rs,[s(f(K),{icon:"ph:check-square-offset",width:"25"}),s(Ot,{modelValue:v.value,"onUpdate:modelValue":U[0]||(U[0]=J=>v.value=J),class:"w-full",onUpdate:U[1]||(U[1]=()=>B())},null,8,["modelValue"])]),s(ge,null,{activator:i(({props:J})=>[s(F,re(J,{icon:"",variant:"text",size:"x-small"}),{default:i(()=>[s(f(K),{icon:"ph:dots-three-outline-fill",width:"20"})]),_:2},1040)]),default:i(()=>[s(oe,null,{default:i(()=>[s(H,{onClick:R,"base-color":"error",density:"compact",class:"flex flex-row items-center",rounded:!1},{default:i(()=>[_("div",Fs,[s(f(K),{icon:"ph:trash",width:"25"}),Bs])]),_:1})]),_:1})]),_:1})]),_("div",zs,[_("p",Ns,ce(w.value)+"%",1),s(le,{title:w.value,color:w.value<100?"":"primary","model-value":w.value,class:"max-w-[100%]",height:"7",rounded:""},null,8,["title","color","model-value"])]),s(oe,{density:"compact"},{default:i(()=>[s(f(ds),{ref_key:"el",ref:$,group:"items",class:"space-y-3",modelValue:u.value.checklistItems,"onUpdate:modelValue":U[3]||(U[3]=J=>u.value.checklistItems=J),animation:150,dragClass:"drag",ghostClass:"ghost",onUpdate:P,scroll:"",scrollSensitivity:300,bubbleScroll:""},{default:i(()=>[(g(!0),O(ke,null,Ve(u.value.checklistItems,J=>(g(),X(As,{key:J.id,"list-id":h.listId,"board-id":h.boardId,id:J.id.toString(),checklistItem:J,onDeleteChecklistItem:U[2]||(U[2]=ue=>q(ue)),onUpdateChecklistItem:(ue,we)=>L(J.id,ue,we)},null,8,["list-id","board-id","id","checklistItem","onUpdateChecklistItem"]))),128))]),_:1},8,["modelValue"])]),_:1}),l.value?et((g(),O("div",Hs,[s(ie,{autofocus:"",onKeydown:[vt(z,["enter"]),U[5]||(U[5]=vt(J=>l.value=!1,["esc"]))],density:"compact",modelValue:T.value,"onUpdate:modelValue":U[6]||(U[6]=J=>T.value=J),class:"text-xs",placeholder:"Add an item"},null,8,["modelValue"]),_("div",qs,[s(F,{onClick:z,variant:"tonal",disabled:T.value.trim().length<1},{default:i(()=>[V(" Add ")]),_:1},8,["disabled"]),s(F,{variant:"tonal",size:"small",height:"35",width:"35",icon:"",onClick:U[7]||(U[7]=J=>l.value=!1)},{default:i(()=>[s(f(K),{icon:"ph:x"})]),_:1})])])),[[ye,()=>l.value=!1]]):(g(),X(F,{key:0,onClick:U[4]||(U[4]=J=>l.value=!0),class:"ml-5",variant:"tonal"},{default:i(()=>[V(" Add an item ")]),_:1}))])}}},Qs=Pt(Ks,[["__scopeId","data-v-c9d631e0"]]),Gs={class:"flex items-start mt-2 gap-2 w-full justify-between"},Ws={class:"flex items-start mt-2 gap-2 w-full"},Js={class:"flex flex-col w-full"},Xs={key:0,class:"p-2 bg-list rounded-lg max-w-max"},Ys={key:2,class:"text-xs flex items-center"},Zs={key:0,class:"justify-self-end self-center"},eo={__name:"Comment",props:{comment:Object,boardId:String,cardId:String},setup(h){const te=es(),u=h,$={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},b=j(null),C=j(!1),k=j(u.comment.text),T=()=>{W.delete(`/comment/${u.comment.id}`,{params:{boardId:u.boardId},withCredentials:!0}).then(w=>{I.emit("update-cards",u.boardId,null),I.emit("update-card",u.cardId)}).catch(w=>{console.log(w)})},l=()=>{W.put(`/comment/${u.comment.id}`,{text:k.value,boardId:u.boardId},{withCredentials:!0}).then(w=>{C.value=!1,I.emit("update-cards",u.boardId,null),I.emit("update-card",u.cardId)}).catch(w=>{console.log(w)})},v=()=>{C.value=!1,k.value=u.comment.text};return(w,L)=>{var S,U;const A=p("v-text-field"),z=p("v-btn"),q=p("v-list-item"),R=p("v-list"),B=p("v-menu"),P=Ze("click-outside");return g(),O("div",Gs,[_("div",Ws,[s(ht,{user:h.comment.user},null,8,["user"]),_("div",Js,[V(ce(h.comment.user.name)+" ",1),C.value?et((g(),O("div",{key:1,ref_key:"textTarget",ref:b},[s(A,{"hide-details":"",class:"w-full min-w-full",modelValue:k.value,"onUpdate:modelValue":L[0]||(L[0]=F=>k.value=F)},null,8,["modelValue"]),_("div",{class:"mt-2 flex gap-2",onClick:l},[s(z,{variant:"tonal",color:"primary"},{default:i(()=>[V(" Save ")]),_:1}),s(z,{variant:"outlined",color:"primary",onClick:L[1]||(L[1]=F=>C.value=!1)},{default:i(()=>[V(" Cancel ")]),_:1})])])),[[P,v]]):(g(),O("p",Xs,ce(h.comment.text),1)),C.value?se("",!0):(g(),O("div",Ys,[_("p",null,ce(new Date(h.comment.createdAt).toLocaleString("en-GB",$)),1),((S=f(te).user)==null?void 0:S.id)===h.comment.user.id?(g(),X(z,{key:0,onClick:L[2]||(L[2]=F=>C.value=!0),size:"small",density:"compact",variant:"text"},{default:i(()=>[V(" edit ")]),_:1})):se("",!0)]))])]),((U=f(te).user)==null?void 0:U.id)===h.comment.user.id?(g(),O("div",Zs,[s(B,null,{activator:i(({props:F})=>[s(z,re(F,{variant:"text",icon:"",size:"small"}),{default:i(()=>[s(f(K),{icon:"ph:dots-three-outline-fill",width:"20"})]),_:2},1040)]),default:i(()=>[s(R,null,{default:i(()=>[s(q,{onClick:T,"base-color":"error",density:"compact",rounded:!1},{prepend:i(()=>[s(f(K),{icon:"ph:trash",width:"25"})]),default:i(()=>[V(" Delete ")]),_:1})]),_:1})]),_:1})])):se("",!0)])}}},to={key:0},ao={key:1},no={class:"action-row flex gap-1 w-full"},aa={__name:"DatePicker",props:_e({endDate:Date,startDate:Date,isComplete:Boolean,isDateDue:Boolean,pastDay:Boolean,isInLessThanDay:Boolean,isDateAsTitle:Boolean},{modelValue:{},modelModifiers:{}}),emits:_e(["selectDate","updateCardDates","onDeleteDate"],["update:modelValue"]),setup(h,{emit:te}){const u=xe(h,"modelValue"),$=h,b=j(!1),C={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},k=ts(),T=De(()=>$.isComplete?"success":$.isDateDue&&$.pastDay?"error":$.isDateDue&&!$.pastDay?"error1":!$.isDateDue&&$.isInLessThanDay?"alert2":"");return(l,v)=>{const w=p("v-btn"),L=p("v-card-title"),A=p("v-card"),z=p("v-menu");return g(),X(z,{modelValue:b.value,"onUpdate:modelValue":v[2]||(v[2]=q=>b.value=q),"close-on-content-click":!1,location:"end"},{activator:i(({props:q})=>[h.isDateAsTitle?(g(),O("div",to,[(g(),X(w,re(q,{variant:"tonal",color:T.value,key:T.value}),{default:i(()=>{var R;return[_("p",null,ce(((R=new Date(h.endDate))==null?void 0:R.toLocaleString("en-GB",C))||null),1)]}),_:2},1040,["color"]))])):(g(),O("div",ao,[s(w,re(q,{variant:"tonal",class:"w-full"}),{prepend:i(()=>[s(f(K),{icon:"ph:clock",width:"20"})]),default:i(()=>[V(" Dates ")]),_:2},1040)]))]),default:i(()=>[s(A,null,{default:i(()=>[s(L,{class:"text-center"},{default:i(()=>[V(" Dates ")]),_:1}),s(f(is),{range:"",inline:"",dark:f(k).global.name.value==="dark",modelValue:u.value,"onUpdate:modelValue":v[1]||(v[1]=q=>u.value=q)},{"action-row":i(({internalModelValue:q,selectDate:R})=>[_("div",no,[s(w,{class:"select-button w-1/2",color:"primary",variant:"outlined",onClick:v[0]||(v[0]=B=>l.$emit("onDeleteDate"))},{default:i(()=>[V(" Delete ")]),_:1}),s(w,{class:"select-button w-1/2",color:"primary",onClick:()=>{R(),l.$emit("updateCardDates"),b.value=!1}},{default:i(()=>[V("Select Date")]),_:2},1032,["onClick"])])]),_:1},8,["dark","modelValue"])]),_:1})]),_:1},8,["modelValue"])}}},lo={class:"pb-3 flex"},so={key:0,class:"flex items-center flex-wrap gap-2"},oo={key:0},io={class:"flex items-center"},ro={key:0},co={__name:"Labels",props:_e({boardLabels:Array,cardId:String,boardId:String,listId:String},{cardLabelsCopy:{},cardLabelsCopyModifiers:{},cardLabels:{},cardLabelsModifiers:{},newLabelMenu:{},newLabelMenuModifiers:{}}),emits:_e(["updateCard","openEditLabel"],["update:cardLabelsCopy","update:cardLabels","update:newLabelMenu"]),setup(h,{emit:te}){const u=xe(h,"cardLabelsCopy"),$=xe(h,"cardLabels"),b=xe(h,"newLabelMenu"),C=h,k=te,T=j(!1),l=async v=>{T.value=!0;try{const w=await W.put(`/card/labels/${C.cardId}`,{labels:v.map(L=>L.id)});k("updateCard",w.data),$.value=w.data.labels,I.emit("update-cards",C.boardId,[C.listId]),I.emit("update-card",C.cardId)}catch(w){de(w)}finally{T.value=!1}};return(v,w)=>{const L=p("v-btn"),A=p("v-card-title"),z=p("v-item"),q=p("v-item-group"),R=p("v-card-text"),B=p("v-card"),P=p("v-menu");return g(),O("div",lo,[$.value.length>0?(g(),O("div",so,[(g(!0),O(ke,null,Ve($.value,S=>(g(),X(L,{color:S.color,variant:"flat"},{default:i(()=>[S.title?(g(),O("p",oo,ce(S.title.toUpperCase()),1)):se("",!0)]),_:2},1032,["color"]))),256))])):se("",!0),s(L,{id:"labels-menu-activator",icon:"",variant:"text",size:"small"},{default:i(()=>[s(f(K),{icon:"ph:plus",width:"20"})]),_:1}),s(P,{"close-on-content-click":!1,activator:"#labels-menu-activator"},{default:i(()=>[s(B,{class:"relative"},{default:i(()=>[s(A,{class:"text-center relative"},{default:i(()=>[V(" Labels ")]),_:1}),s(R,null,{default:i(()=>[s(q,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=S=>u.value=S),multiple:"",class:"space-y-2 my-2 w-96"},{default:i(()=>[(g(!0),O(ke,null,Ve(h.boardLabels,S=>(g(),X(z,{value:S},{default:i(({isSelected:U,toggle:F})=>[_("div",io,[s(L,{class:"w-11/12",color:S.color,onClick:async()=>{await F(),await l(u.value)}},Mt({default:i(()=>[S.title?(g(),O("p",ro,ce(S.title.toUpperCase()),1)):se("",!0)]),_:2},[U?{name:"prepend",fn:i(()=>[s(f(K),{icon:"ph:check",width:"20"})]),key:"0"}:void 0]),1032,["color","onClick"]),s(L,{icon:"",variant:"text",size:"small",onClick:H=>v.$emit("openEditLabel",S)},{default:i(()=>[s(f(K),{icon:"ph:pencil-simple",width:"20"})]),_:2},1032,["onClick"])])]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),s(L,{onClick:w[1]||(w[1]=S=>b.value=!0),variant:"tonal",class:"w-full"},{default:i(()=>[V(" Add a new label ")]),_:1})]),_:1})]),_:1})]),_:1})])}}},uo={class:"flex justify-end gap-2 mb-1 mr-1"},fo={__name:"CardCover",props:_e({cover:String,cardId:String,boardId:String,listId:String},{modelValue:{},modelModifiers:{}}),emits:_e("update-card",["update:modelValue"]),setup(h,{emit:te}){const u=xe(h,"modelValue"),$=h,b=te,C=j(!1),k=j(!1),T=()=>{k.value=!0,W.put(`/card/deleteCover/${$.cardId}`,{},{withCredentials:!0}).then(l=>{b("updateCard",l.data),I.emit("update-card",$.cardId),I.emit("update-cards",$.boardId,[$.listId])}).catch(l=>{de(l)}).finally(()=>{k.value=!1})};return(l,v)=>{const w=p("v-btn"),L=p("v-overlay"),A=p("v-file-input"),z=p("v-card-text"),q=p("v-card-actions"),R=p("v-card"),B=p("v-menu"),P=p("v-img"),S=p("v-hover");return g(),O("div",null,[s(S,{"open-delay":200},{default:i(({isHovering:U,props:F})=>[h.cover?(g(),X(P,re({key:0},F,{src:h.cover,cover:"",height:"200"}),{default:i(()=>[s(L,{"model-value":U,scrim:"black",class:"align-end gap-2 flex space-x-4 justify-end",contained:""},{default:i(()=>[_("div",uo,[s(w,{color:"error",size:"small",onClick:T},{default:i(()=>[V(" Delete Cover ")]),_:1}),s(w,re(F,{onClick:v[0]||(v[0]=H=>C.value=!0),variant:"flat",color:"primary",size:"small"}),{default:i(()=>[V(" Change Cover ")]),_:2},1040)])]),_:2},1032,["model-value"]),s(B,{class:"mx-auto -mt-48 flex justify-center items-center",modelValue:C.value,"onUpdate:modelValue":v[3]||(v[3]=H=>C.value=H)},{default:i(({isActive:H})=>[s(R,{class:"w-80"},{default:i(()=>[s(z,null,{default:i(()=>[s(A,{modelValue:u.value,"onUpdate:modelValue":v[1]||(v[1]=oe=>u.value=oe),accept:"image/*",label:"Cover",variant:"solo-filled"},null,8,["modelValue"])]),_:1}),s(q,{class:"flex justify-end self-end justify-self-end"},{default:i(()=>[s(w,{variant:"outlined",color:"primary",onClick:oe=>H.value=!1},{default:i(()=>[V(" Cancel ")]),_:2},1032,["onClick"]),s(w,{onClick:v[2]||(v[2]=oe=>b("addCardCover")),disabled:k.value,loading:k.value,variant:"flat",color:"primary"},{default:i(()=>[V(" Upload ")]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:2},1040,["src"])):se("",!0)]),_:1})])}}};var Ut={exports:{}};const mo=as(ms);(function(h,te){(function(u,$){$(te,mo)})(ns,function(u,$){const b=/^[a-z0-9]+(-[a-z0-9]+)*$/,C=(e,t,a,o="")=>{const n=e.split(":");if(e.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;o=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){const m=n.pop(),y=n.pop(),D={provider:n.length>0?n[0]:o,prefix:y,name:m};return t&&!k(D)?null:D}const r=n[0],c=r.split("-");if(c.length>1){const m={provider:o,prefix:c.shift(),name:c.join("-")};return t&&!k(m)?null:m}if(a&&o===""){const m={provider:o,prefix:"",name:r};return t&&!k(m,a)?null:m}return null},k=(e,t)=>e?!!((e.provider===""||e.provider.match(b))&&(t&&e.prefix===""||e.prefix.match(b))&&e.name.match(b)):!1,T=Object.freeze({left:0,top:0,width:16,height:16}),l=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),v=Object.freeze({...T,...l}),w=Object.freeze({...v,body:"",hidden:!1});function L(e,t){const a={};!e.hFlip!=!t.hFlip&&(a.hFlip=!0),!e.vFlip!=!t.vFlip&&(a.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(a.rotate=o),a}function A(e,t){const a=L(e,t);for(const o in w)o in l?o in e&&!(o in a)&&(a[o]=l[o]):o in t?a[o]=t[o]:o in e&&(a[o]=e[o]);return a}function z(e,t){const a=e.icons,o=e.aliases||Object.create(null),n=Object.create(null);function r(c){if(a[c])return n[c]=[];if(!(c in n)){n[c]=null;const m=o[c]&&o[c].parent,y=m&&r(m);y&&(n[c]=[m].concat(y))}return n[c]}return(t||Object.keys(a).concat(Object.keys(o))).forEach(r),n}function q(e,t,a){const o=e.icons,n=e.aliases||Object.create(null);let r={};function c(m){r=A(o[m]||n[m],r)}return c(t),a.forEach(c),A(e,r)}function R(e,t){const a=[];if(typeof e!="object"||typeof e.icons!="object")return a;e.not_found instanceof Array&&e.not_found.forEach(n=>{t(n,null),a.push(n)});const o=z(e);for(const n in o){const r=o[n];r&&(t(n,q(e,n,r)),a.push(n))}return a}const B={provider:"",aliases:{},not_found:{},...T};function P(e,t){for(const a in t)if(a in e&&typeof e[a]!=typeof t[a])return!1;return!0}function S(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!P(e,B))return null;const a=t.icons;for(const n in a){const r=a[n];if(!n.match(b)||typeof r.body!="string"||!P(r,w))return null}const o=t.aliases||Object.create(null);for(const n in o){const r=o[n],c=r.parent;if(!n.match(b)||typeof c!="string"||!a[c]&&!o[c]||!P(r,w))return null}return t}const U=Object.create(null);function F(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function H(e,t){const a=U[e]||(U[e]=Object.create(null));return a[t]||(a[t]=F(e,t))}function oe(e,t){return S(t)?R(t,(a,o)=>{o?e.icons[a]=o:e.missing.add(a)}):[]}function ge(e,t,a){try{if(typeof a.body=="string")return e.icons[t]={...a},!0}catch{}return!1}function le(e,t){let a=[];return(typeof e=="string"?[e]:Object.keys(U)).forEach(n=>{(typeof n=="string"&&typeof t=="string"?[t]:Object.keys(U[n]||{})).forEach(c=>{const m=H(n,c);a=a.concat(Object.keys(m.icons).map(y=>(n!==""?"@"+n+":":"")+c+":"+y))})}),a}let ie=!1;function ye(e){return typeof e=="boolean"&&(ie=e),ie}function J(e){const t=typeof e=="string"?C(e,!0,ie):e;if(t){const a=H(t.provider,t.prefix),o=t.name;return a.icons[o]||(a.missing.has(o)?null:void 0)}}function ue(e,t){const a=C(e,!0,ie);if(!a)return!1;const o=H(a.provider,a.prefix);return ge(o,a.name,t)}function we(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),ie&&!t&&!e.prefix){let n=!1;return S(e)&&(e.prefix="",R(e,(r,c)=>{c&&ue(r,c)&&(n=!0)})),n}const a=e.prefix;if(!k({provider:t,prefix:a,name:"a"}))return!1;const o=H(t,a);return!!oe(o,e)}function tt(e){return!!J(e)}function Ce(e){const t=J(e);return t?{...v,...t}:null}const at=Object.freeze({width:null,height:null}),nt=Object.freeze({...at,...l}),bt=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Fe=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ae(e,t,a){if(t===1)return e;if(a=a||100,typeof e=="number")return Math.ceil(e*t*a)/a;if(typeof e!="string")return e;const o=e.split(bt);if(o===null||!o.length)return e;const n=[];let r=o.shift(),c=Fe.test(r);for(;;){if(c){const m=parseFloat(r);isNaN(m)?n.push(r):n.push(Math.ceil(m*t*a)/a)}else n.push(r);if(r=o.shift(),r===void 0)return n.join("");c=!c}}const lt=e=>e==="unset"||e==="undefined"||e==="none";function st(e,t){const a={...v,...e},o={...nt,...t},n={left:a.left,top:a.top,width:a.width,height:a.height};let r=a.body;[a,o].forEach(he=>{const Z=[],G=he.hFlip,Me=he.vFlip;let pe=he.rotate;G?Me?pe+=2:(Z.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),Z.push("scale(-1 1)"),n.top=n.left=0):Me&&(Z.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),Z.push("scale(1 -1)"),n.top=n.left=0);let ve;switch(pe<0&&(pe-=Math.floor(pe/4)*4),pe=pe%4,pe){case 1:ve=n.height/2+n.top,Z.unshift("rotate(90 "+ve.toString()+" "+ve.toString()+")");break;case 2:Z.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:ve=n.width/2+n.left,Z.unshift("rotate(-90 "+ve.toString()+" "+ve.toString()+")");break}pe%2===1&&(n.left!==n.top&&(ve=n.left,n.left=n.top,n.top=ve),n.width!==n.height&&(ve=n.width,n.width=n.height,n.height=ve)),Z.length&&(r='<g transform="'+Z.join(" ")+'">'+r+"</g>")});const c=o.width,m=o.height,y=n.width,D=n.height;let M,Y;c===null?(Y=m===null?"1em":m==="auto"?D:m,M=Ae(Y,y/D)):(M=c==="auto"?y:c,Y=m===null?Ae(M,D/y):m==="auto"?D:m);const ne={},me=(he,Z)=>{lt(Z)||(ne[he]=Z.toString())};return me("width",M),me("height",Y),ne.viewBox=n.left.toString()+" "+n.top.toString()+" "+y.toString()+" "+D.toString(),{attributes:ne,body:r}}const _t=/\sid="(\S+)"/g,Be="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let ot=0;function ze(e,t=Be){const a=[];let o;for(;o=_t.exec(e);)a.push(o[1]);if(!a.length)return e;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return a.forEach(r=>{const c=typeof t=="function"?t(r):t+(ot++).toString(),m=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+m+')([")]|\\.[a-z])',"g"),"$1"+c+n+"$3")}),e=e.replace(new RegExp(n,"g"),""),e}const Ee=Object.create(null);function it(e,t){Ee[e]=t}function Ne(e){return Ee[e]||Ee[""]}function He(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const Pe=Object.create(null),$e=["https://api.simplesvg.com","https://api.unisvg.com"],Te=[];for(;$e.length>0;)$e.length===1||Math.random()>.5?Te.push($e.shift()):Te.push($e.pop());Pe[""]=He({resources:["https://api.iconify.design"].concat(Te)});function qe(e,t){const a=He(t);return a===null?!1:(Pe[e]=a,!0)}function x(e){return Pe[e]}function d(){return Object.keys(Pe)}let Oe=(()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}})();function gt(e){Oe=e}function Ke(){return Oe}function rt(e,t){const a=x(e);if(!a)return 0;let o;if(!a.maxURL)o=0;else{let n=0;a.resources.forEach(c=>{n=Math.max(n,c.length)});const r=t+".json?icons=";o=a.maxURL-n-a.path.length-r.length}return o}function Qe(e){return e===404}const Ct=(e,t,a)=>{const o=[],n=rt(e,t),r="icons";let c={type:r,provider:e,prefix:t,icons:[]},m=0;return a.forEach((y,D)=>{m+=y.length+1,m>=n&&D>0&&(o.push(c),c={type:r,provider:e,prefix:t,icons:[]},m=y.length),c.icons.push(y)}),o.push(c),o};function yt(e){if(typeof e=="string"){const t=x(e);if(t)return t.path}return"/"}const Ie={prepare:Ct,send:(e,t,a)=>{if(!Oe){a("abort",424);return}let o=yt(t.provider);switch(t.type){case"icons":{const r=t.prefix,m=t.icons.join(","),y=new URLSearchParams({icons:m});o+=r+".json?"+y.toString();break}case"custom":{const r=t.uri;o+=r.slice(0,1)==="/"?r.slice(1):r;break}default:a("abort",400);return}let n=503;Oe(e+o).then(r=>{const c=r.status;if(c!==200){setTimeout(()=>{a(Qe(c)?"abort":"next",c)});return}return n=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?a("abort",r):a("next",n)});return}setTimeout(()=>{a("success",r)})}).catch(()=>{a("next",n)})}};function Ge(e){const t={loaded:[],missing:[],pending:[]},a=Object.create(null);e.sort((n,r)=>n.provider!==r.provider?n.provider.localeCompare(r.provider):n.prefix!==r.prefix?n.prefix.localeCompare(r.prefix):n.name.localeCompare(r.name));let o={provider:"",prefix:"",name:""};return e.forEach(n=>{if(o.name===n.name&&o.prefix===n.prefix&&o.provider===n.provider)return;o=n;const r=n.provider,c=n.prefix,m=n.name,y=a[r]||(a[r]=Object.create(null)),D=y[c]||(y[c]=H(r,c));let M;m in D.icons?M=t.loaded:c===""||D.missing.has(m)?M=t.missing:M=t.pending;const Y={provider:r,prefix:c,name:m};M.push(Y)}),t}function We(e,t){e.forEach(a=>{const o=a.loaderCallbacks;o&&(a.loaderCallbacks=o.filter(n=>n.id!==t))})}function dt(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let a=!1;const o=e.provider,n=e.prefix;t.forEach(r=>{const c=r.icons,m=c.pending.length;c.pending=c.pending.filter(y=>{if(y.prefix!==n)return!0;const D=y.name;if(e.icons[D])c.loaded.push({provider:o,prefix:n,name:D});else if(e.missing.has(D))c.missing.push({provider:o,prefix:n,name:D});else return a=!0,!0;return!1}),c.pending.length!==m&&(a||We([e],r.id),r.callback(c.loaded.slice(0),c.missing.slice(0),c.pending.slice(0),r.abort))})}))}let wt=0;function kt(e,t,a){const o=wt++,n=We.bind(null,a,o);if(!t.pending.length)return n;const r={id:o,icons:t,callback:e,abort:n};return a.forEach(c=>{(c.loaderCallbacks||(c.loaderCallbacks=[])).push(r)}),n}function Je(e,t=!0,a=!1){const o=[];return e.forEach(n=>{const r=typeof n=="string"?C(n,t,a):n;r&&o.push(r)}),o}var ct={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Q(e,t,a,o){const n=e.resources.length,r=e.random?Math.floor(Math.random()*n):e.index;let c;if(e.random){let ee=e.resources.slice(0);for(c=[];ee.length>1;){const be=Math.floor(Math.random()*ee.length);c.push(ee[be]),ee=ee.slice(0,be).concat(ee.slice(be+1))}c=c.concat(ee)}else c=e.resources.slice(r).concat(e.resources.slice(0,r));const m=Date.now();let y="pending",D=0,M,Y=null,ne=[],me=[];typeof o=="function"&&me.push(o);function he(){Y&&(clearTimeout(Y),Y=null)}function Z(){y==="pending"&&(y="aborted"),he(),ne.forEach(ee=>{ee.status==="pending"&&(ee.status="aborted")}),ne=[]}function G(ee,be){be&&(me=[]),typeof ee=="function"&&me.push(ee)}function Me(){return{startTime:m,payload:t,status:y,queriesSent:D,queriesPending:ne.length,subscribe:G,abort:Z}}function pe(){y="failed",me.forEach(ee=>{ee(void 0,M)})}function ve(){ne.forEach(ee=>{ee.status==="pending"&&(ee.status="aborted")}),ne=[]}function La(ee,be,Ye){const pt=be!=="success";switch(ne=ne.filter(je=>je!==ee),y){case"pending":break;case"failed":if(pt||!e.dataAfterTimeout)return;break;default:return}if(be==="abort"){M=Ye,pe();return}if(pt){M=Ye,ne.length||(c.length?Lt():pe());return}if(he(),ve(),!e.random){const je=e.resources.indexOf(ee.resource);je!==-1&&je!==e.index&&(e.index=je)}y="completed",me.forEach(je=>{je(Ye)})}function Lt(){if(y!=="pending")return;he();const ee=c.shift();if(ee===void 0){if(ne.length){Y=setTimeout(()=>{he(),y==="pending"&&(ve(),pe())},e.timeout);return}pe();return}const be={status:"pending",resource:ee,callback:(Ye,pt)=>{La(be,Ye,pt)}};ne.push(be),D++,Y=setTimeout(Lt,e.rotate),a(ee,t,be.callback)}return setTimeout(Lt),Me}function N(e){const t={...ct,...e};let a=[];function o(){a=a.filter(m=>m().status==="pending")}function n(m,y,D){const M=Q(t,m,y,(Y,ne)=>{o(),D&&D(Y,ne)});return a.push(M),M}function r(m){return a.find(y=>m(y))||null}return{query:n,find:r,setIndex:m=>{t.index=m},getIndex:()=>t.index,cleanup:o}}function fe(){}const Se=Object.create(null);function ut(e){if(!Se[e]){const t=x(e);if(!t)return;const a=N(t),o={config:t,redundancy:a};Se[e]=o}return Se[e]}function E(e,t,a){let o,n;if(typeof e=="string"){const r=Ne(e);if(!r)return a(void 0,424),fe;n=r.send;const c=ut(e);c&&(o=c.redundancy)}else{const r=He(e);if(r){o=N(r);const c=e.resources?e.resources[0]:"",m=Ne(c);m&&(n=m.send)}}return!o||!n?(a(void 0,424),fe):o.query(t,n,a)().abort}const Re="iconify2",Xe="iconify",Rt=Xe+"-count",Ft=Xe+"-version",Bt=36e5,da=168;function xt(e,t){try{return e.getItem(t)}catch{}}function It(e,t,a){try{return e.setItem(t,a),!0}catch{}}function zt(e,t){try{e.removeItem(t)}catch{}}function St(e,t){return It(e,Rt,t.toString())}function Dt(e){return parseInt(xt(e,Rt))||0}const Ue={local:!0,session:!0},Nt={local:new Set,session:new Set};let Vt=!1;function ca(e){Vt=e}let ft=typeof window>"u"?{}:window;function Ht(e){const t=e+"Storage";try{if(ft&&ft[t]&&typeof ft[t].length=="number")return ft[t]}catch{}Ue[e]=!1}function qt(e,t){const a=Ht(e);if(!a)return;const o=xt(a,Ft);if(o!==Re){if(o){const m=Dt(a);for(let y=0;y<m;y++)zt(a,Xe+y.toString())}It(a,Ft,Re),St(a,0);return}const n=Math.floor(Date.now()/Bt)-da,r=m=>{const y=Xe+m.toString(),D=xt(a,y);if(typeof D=="string"){try{const M=JSON.parse(D);if(typeof M=="object"&&typeof M.cached=="number"&&M.cached>n&&typeof M.provider=="string"&&typeof M.data=="object"&&typeof M.data.prefix=="string"&&t(M,m))return!0}catch{}zt(a,y)}};let c=Dt(a);for(let m=c-1;m>=0;m--)r(m)||(m===c-1?(c--,St(a,c)):Nt[e].add(m))}function Kt(){if(!Vt){ca(!0);for(const e in Ue)qt(e,t=>{const a=t.data,o=t.provider,n=a.prefix,r=H(o,n);if(!oe(r,a).length)return!1;const c=a.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,c):c,!0})}}function ua(e,t){const a=e.lastModifiedCached;if(a&&a>=t)return a===t;if(e.lastModifiedCached=t,a)for(const o in Ue)qt(o,n=>{const r=n.data;return n.provider!==e.provider||r.prefix!==e.prefix||r.lastModified===t});return!0}function fa(e,t){Vt||Kt();function a(o){let n;if(!Ue[o]||!(n=Ht(o)))return;const r=Nt[o];let c;if(r.size)r.delete(c=Array.from(r).shift());else if(c=Dt(n),!St(n,c+1))return;const m={cached:Math.floor(Date.now()/Bt),provider:e.provider,data:t};return It(n,Xe+c.toString(),JSON.stringify(m))}t.lastModified&&!ua(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),a("local")||a("session"))}function Qt(){}function ma(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,dt(e)}))}function pa(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:a,prefix:o}=e,n=e.iconsToLoad;delete e.iconsToLoad;let r;if(!n||!(r=Ne(a)))return;r.prepare(a,o,n).forEach(m=>{E(a,m,y=>{if(typeof y!="object")m.icons.forEach(D=>{e.missing.add(D)});else try{const D=oe(e,y);if(!D.length)return;const M=e.pendingIcons;M&&D.forEach(Y=>{M.delete(Y)}),fa(e,y)}catch(D){console.error(D)}ma(e)})})}))}const $t=(e,t)=>{const a=Je(e,!0,ye()),o=Ge(a);if(!o.pending.length){let y=!0;return t&&setTimeout(()=>{y&&t(o.loaded,o.missing,o.pending,Qt)}),()=>{y=!1}}const n=Object.create(null),r=[];let c,m;return o.pending.forEach(y=>{const{provider:D,prefix:M}=y;if(M===m&&D===c)return;c=D,m=M,r.push(H(D,M));const Y=n[D]||(n[D]=Object.create(null));Y[M]||(Y[M]=[])}),o.pending.forEach(y=>{const{provider:D,prefix:M,name:Y}=y,ne=H(D,M),me=ne.pendingIcons||(ne.pendingIcons=new Set);me.has(Y)||(me.add(Y),n[D][M].push(Y))}),r.forEach(y=>{const{provider:D,prefix:M}=y;n[D][M].length&&pa(y,n[D][M])}),t?kt(t,o,r):Qt},va=e=>new Promise((t,a)=>{const o=typeof e=="string"?C(e,!0):e;if(!o){a(e);return}$t([o||e],n=>{if(n.length&&o){const r=J(o);if(r){t({...v,...r});return}}a(e)})});function Gt(e,t){switch(e){case"local":case"session":Ue[e]=t;break;case"all":for(const a in Ue)Ue[a]=t;break}}function ha(e,t){const a={...e};for(const o in t){const n=t[o],r=typeof n;o in at?(n===null||n&&(r==="string"||r==="number"))&&(a[o]=n):r===typeof a[o]&&(a[o]=o==="rotate"?n%4:n)}return a}const ba=/[\s,]+/;function _a(e,t){t.split(ba).forEach(a=>{switch(a.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function ga(e,t=0){const a=e.replace(/^-?[0-9.]*/,"");function o(n){for(;n<0;)n+=4;return n%4}if(a===""){const n=parseInt(e);return isNaN(n)?0:o(n)}else if(a!==e){let n=0;switch(a){case"%":n=25;break;case"deg":n=90}if(n){let r=parseFloat(e.slice(0,e.length-a.length));return isNaN(r)?0:(r=r/n,r%1===0?o(r):0)}}return t}function Ca(e,t){let a=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in t)a+=" "+o+'="'+t[o]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+e+"</svg>"}function ya(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function wa(e){return"data:image/svg+xml,"+ya(e)}function ka(e){return'url("'+wa(e)+'")'}const Wt={...nt,inline:!1},xa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ia={display:"inline-block"},Tt={backgroundColor:"currentColor"},Jt={backgroundColor:"transparent"},Xt={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Yt={webkitMask:Tt,mask:Tt,background:Jt};for(const e in Yt){const t=Yt[e];for(const a in Xt)t[e+a]=Xt[a]}const mt={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";mt[e+"-flip"]=t,mt[e.slice(0,1)+"-flip"]=t,mt[e+"Flip"]=t});function Zt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const ea=(e,t)=>{const a=ha(Wt,t),o={...xa},n=t.mode||"svg",r={},c=t.style,m=typeof c=="object"&&!(c instanceof Array)?c:{};for(let Z in t){const G=t[Z];if(G!==void 0)switch(Z){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":a[Z]=G===!0||G==="true"||G===1;break;case"flip":typeof G=="string"&&_a(a,G);break;case"color":r.color=G;break;case"rotate":typeof G=="string"?a[Z]=ga(G):typeof G=="number"&&(a[Z]=G);break;case"ariaHidden":case"aria-hidden":G!==!0&&G!=="true"&&delete o["aria-hidden"];break;default:{const Me=mt[Z];Me?(G===!0||G==="true"||G===1)&&(a[Me]=!0):Wt[Z]===void 0&&(o[Z]=G)}}}const y=st(e,a),D=y.attributes;if(a.inline&&(r.verticalAlign="-0.125em"),n==="svg"){o.style={...r,...m},Object.assign(o,D);let Z=0,G=t.id;return typeof G=="string"&&(G=G.replace(/-/g,"_")),o.innerHTML=ze(y.body,G?()=>G+"ID"+Z++:"iconifyVue"),$.h("svg",o)}const{body:M,width:Y,height:ne}=e,me=n==="mask"||(n==="bg"?!1:M.indexOf("currentColor")!==-1),he=Ca(M,{...D,width:Y+"",height:ne+""});return o.style={...r,"--svg":ka(he),width:Zt(D.width),height:Zt(D.height),...Ia,...me?Tt:Jt,...m},$.h("span",o)};function Sa(e){Gt(e,!0)}function Da(e){Gt(e,!1)}if(ye(!0),it("",Ie),typeof document<"u"&&typeof window<"u"){Kt();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,a="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!we(o))&&console.error(a)}catch{console.error(a)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let a in t){const o="IconifyProviders["+a+"] is invalid.";try{const n=t[a];if(typeof n!="object"||!n||n.resources===void 0)continue;qe(a,n)||console.error(o)}catch{console.error(o)}}}}const Va={...v,body:""},$a=$.defineComponent({inheritAttrs:!1,data(){return{iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let a;if(typeof e!="string"||(a=C(e,!1,!0))===null)return this.abortLoading(),null;const o=J(a);if(!o)return(!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",o!==null&&(this._loadingIcon={name:e,abort:$t([a],()=>{this.counter++})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const n=["iconify"];return a.prefix!==""&&n.push("iconify--"+a.prefix),a.provider!==""&&n.push("iconify--"+a.provider),{data:o,classes:n}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return ea(Va,e);let a=e;return t.classes&&(a={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),ea({...v,...t.data},a)}}),Ta={getAPIConfig:x,setAPIModule:it,sendAPIQuery:E,setFetch:gt,getFetch:Ke,listAPIProviders:d};u.Icon=$a,u._api=Ta,u.addAPIProvider=qe,u.addCollection=we,u.addIcon=ue,u.buildIcon=st,u.calculateSize=Ae,u.disableCache=Da,u.enableCache=Sa,u.getIcon=Ce,u.iconExists=tt,u.listIcons=le,u.loadIcon=va,u.loadIcons=$t,u.replaceIDs=ze})})(Ut,Ut.exports);var po=Ut.exports;const vo={class:""},ho={class:"flex items-center gap-1"},bo={key:1,class:"h-32 mt-2 my-20"},_o={class:"flex gap-3 justify-end mt-3"},go=["innerHTML"],Co={__name:"CardDescription",props:{description:String,cardId:String,boardId:String,listId:String},emits:"updateCard",setup(h,{emit:te}){const u=h,$=te,b=j(""),C=j(""),k=j(!1),T=j(u.description),l=()=>{C.value=b.value.getText()},v=()=>{k.value=!1,w()},w=()=>{C.value.trim().length<1&&(k.value=!1,T.value=null),W.put(`/card/description/${u.cardId}`,{description:T.value},{withCredentials:!0}).then(L=>{k.value=!1,$("updateCard",L.data),I.emit("update-card",u.cardId),I.emit("update-cards",u.boardId,[u.listId])}).catch(L=>{de(L)})};return(L,A)=>{const z=p("v-card-text"),q=p("v-card"),R=p("v-btn"),B=Ze("click-outside");return g(),O("div",null,[_("div",vo,[_("div",ho,[s(f(po.Icon),{icon:"ph:text-align-left",width:"25"}),V(" Description ")]),(!h.description||h.description.length===0)&&!k.value?(g(),X(q,{key:0,class:"mt-2",variant:"tonal",onClick:A[0]||(A[0]=P=>k.value=!0)},{default:i(()=>[s(z,null,{default:i(()=>[V(" Add a more detailed description... ")]),_:1})]),_:1})):se("",!0),k.value?et((g(),O("div",bo,[s(f(us),{ref_key:"quill",ref:b,toolbar:"essential",content:T.value,"onUpdate:content":A[1]||(A[1]=P=>T.value=P),onTextChange:l,contentType:"html",theme:"snow"},null,8,["content"]),_("div",_o,[s(R,{color:"primary",variant:"outlined",onClick:A[2]||(A[2]=()=>{k.value=!1,T.value=h.description})},{default:i(()=>[V(" Cancel ")]),_:1}),s(R,{color:"primary",onClick:A[3]||(A[3]=()=>w())},{default:i(()=>[V(" Save ")]),_:1})])])),[[B,v]]):se("",!0),h.description&&!k.value?(g(),O("div",{key:2,class:"pt-2 max-w-full overflow-y-auto description",onClick:A[4]||(A[4]=P=>k.value=!0),innerHTML:T.value},null,8,go)):se("",!0)])])}}},yo=Pt(Co,[["__scopeId","data-v-6114a8ae"]]);const wo={class:"!flex justify-between mb-7"},ko={class:"w-full"},xo={class:"!text-sm"},Io={class:"underline font-bold"},So=_("p",{class:"mb-2"},"Labels",-1),Do={key:0,class:"pb-3 space-y-1"},Vo={class:"flex items-center gap-1"},$o={class:"inline-flex gap-1 items-center justify-center"},To={key:1,class:"pb-3"},Lo=_("p",null,"Members",-1),Uo={class:"flex pt-2 p-1 -space-x-2 overflow-hidden"},Mo={class:"space-y-2 flex flex-col"},jo={key:0,class:"flex items-center gap-1 mt-5"},Ao={class:"my-2"},Eo={class:"flex items-center mt-6 gap-1"},Po={class:"w-full space-y-2"},Oo=_("p",{class:"text-md"},"Add to card",-1),Ro={class:"flex items-center"},Fo={key:0},Bo=_("br",null,null,-1),zo={class:"bg-list mb-2 h-20 w-full flex justify-center items-center px-4"},No={key:0},Ho={class:"flex justify-between items-center"},qo=_("p",null,"Edit label",-1),Ko={class:"bg-list mb-2 h-20 w-full flex justify-center items-center px-4"},Qo={key:0},Go={class:"flex items-center gap-2"},ti={__name:"CardDetails",props:{isDateDue:Boolean,isInLessThanDay:Boolean},emits:["closeModal","updateCard","deleteCard"],async setup(h,{emit:te}){let u,$;const b=te,C=rs(),{cardId:k}=ls(C),T=j(!1),{card:l}=([u,$]=ia(()=>os(k.value)),u=await u,$(),u),v=j(!1),w=j(l.value.isComplete),L=j(null),A=j(l.value.labels),z=j(null),q=j(l==null?void 0:l.value.title),R=j(l==null?void 0:l.value.assignees),B=Et(),P=j();let S=j([]);const U=j(!1),F=j(),H=j(),oe=j(!1),{members:ge}=ss(l==null?void 0:l.value.board.id),le=j(null),ie=j(!1),ye=j(""),J=j(),ue=j(!1),we=j(!1),tt=j(!1),Ce=x=>{b("updateCard",x),l.value=x,I.emit("update-cards",l.value.board.id,[l.value.list.id])},at=x=>{l.value.checklist=x,b("updateCard",l.value)},nt=()=>{W.put(`/card/isComplete/${k.value}`,{isComplete:l.value.isComplete},{withCredentials:!0}).then(x=>{l.value.isComplete=x.data.isComplete,w.value=x.data.isComplete,b("updateCard",x.data),I.emit("update-cards",l.value.board.id,[l.value.list.id]),I.emit("update-card",l.value.id)}).catch(x=>{de(x)})},bt=x=>{console.log("hello"),W.put(`/card/title/${k.value}`,{title:x},{withCredentials:!0}).then(d=>{console.log(d),v.value=!1,l.value.title=d.data.title,b("updateCard",d.data),I.emit("update-card",l.value.id),I.emit("update-cards",l.value.board.id,[l.value.list.id])}).catch(d=>{console.log(d),de(d)})},Fe=()=>{W.put(`/card/dates/${k.value}`,{startDate:P.value[0],endDate:P.value[1]},{withCredentials:!0}).then(x=>{U.value=!1,l.value.startDate=P.value[0],l.value.endDate=P.value[1],L.value=P.value[0],z.value=P.value[1],b("updateCard",x.data),I.emit("update-card",l.value.id),I.emit("update-cards",l.value.board.id,[l.value.list.id])}).catch(x=>{de(x)})},Ae=()=>{P.value=[null,null],U.value=!1,Fe(),l.value.startDate=new Date,l.value.endDate=new Date,P.value=[new Date,new Date],w.value=!1,l.value.isComplete=!1,L.value=new Date,z.value=new Date},lt=x=>{ue.value=!0,W.put(`/card/cover/${k.value}`,{file:x},{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then(d=>{b("updateCard",d.data),I.emit("update-card",l.value.id),I.emit("update-cards",l.value.board.id,[l.value.list.id])}).catch(d=>{de(d)}).finally(()=>{ue.value=!1})},st=()=>{ue.value=!0;const x=new FormData;S.value.forEach(d=>{x.append("files",d)}),W.put(`/card/attachments/${k.value}`,x,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then(d=>{b("updateCard",d.data),I.emit("update-card",l.value.id),I.emit("update-cards",l.value.board.id,[l.value.list.id]),S.value=[]}).catch(d=>{de(d)}).finally(()=>{ue.value=!1})},_t=De(()=>new Date(l==null?void 0:l.value.endDate)-new Date),Be=De(()=>_t.value/(1e3*60*60)),ot=De(()=>new Date>z.value&&!l.value.isComplete),ze=De(()=>Be.value<24&&Be.value>0&&!l.value.isComplete),Ee=De(()=>Be.value<-24&&!l.value.isComplete),it=()=>{W.delete(`/card/${k.value}`,{withCredentials:!0}).then(()=>{I.emit("update-cards",l.value.board.id,[l.value.list.id]),B.success("card was deleted"),I.emit("delete-card",k.value)}).catch(x=>{de(x)})},Ne=()=>{W.put(`/card/labels/${l.value.id}`,{labels:A.value.map(x=>x.id)},{withCredentials:!0}).then(x=>{b("updateCard",x.data),A.value=x.data.labels,I.emit("update-cards",l.value.board.id,[l.value.list.id]),I.emit("update-card",l.value.id)}).catch(x=>{de(x)})},He=()=>{tt.value=!0,W.post("/label/create",{title:H.value,color:F.value},{params:{boardId:l.value.board.id},withCredentials:!0}).then(x=>{l.value.board.labels.push(x.data),I.emit("update-cards",l.value.board.id,[l.value.list.id]),I.emit("update-card",l.value.id),oe.value=!1,H.value=null,F.value=null}).catch(x=>{de(x)}).finally(()=>{tt.value=!1})},Pe=x=>{W.put(`/label/${x}`,{title:le.value.title,color:le.value.color},{params:{boardId:l.value.board.id},withCredentials:!0}).then(d=>{ie.value=!1,le.value=null,I.emit("update-cards",l.value.board.id,null),I.emit("update-card",l.value.id)}).catch(d=>{de(d)})},$e=x=>{W.delete(`/label/${x}`,{params:{boardId:l.value.board.id},withCredentials:!0}).then(d=>{ie.value=!1,le.value=null,l.value.board.labels=l.value.board.labels.filter(ae=>ae.id!==x),l.value.labels=l.value.labels.filter(ae=>ae.id!==x),I.emit("update-cards",l.value.board.id,null),I.emit("update-card",l.value.id)}).catch(d=>{de(d)})},Te=x=>{console.log(x),ie.value=!0,le.value=x};oa(ie,()=>{ie.value||(le.value=null)});const qe=async()=>{we.value=!0;try{await W.post(`/comment/${l.value.id}/create`,{text:ye.value,boardId:l.value.board.id}),ye.value="",I.emit("update-cards",l.value.board.id,null),I.emit("update-card",l.value.id)}catch(x){de(x)}finally{we.value=!1}};return la(()=>{I.emit("subscribe",k.value),(l==null?void 0:l.value.endDate)!==null?z.value=new Date(l==null?void 0:l.value.endDate):z.value=new Date,(l==null?void 0:l.value.startDate)!==null?L.value=new Date(l==null?void 0:l.value.startDate):L.value=new Date,P.value=[L.value,z.value]}),sa(()=>{I.emit("unsubscribe",l.value.id)}),(x,d)=>{const ae=p("v-btn"),Oe=p("v-checkbox"),gt=p("v-tooltip"),Ke=p("v-text-field"),rt=p("v-col"),Qe=p("v-card-title"),Ct=p("v-item"),yt=p("v-item-group"),Le=p("v-card-text"),Ie=p("v-card"),Ge=p("v-menu"),We=p("v-file-input"),dt=p("v-card-actions"),wt=p("v-divider"),kt=p("v-row"),Je=p("v-dialog"),ct=p("v-color-picker");return g(),O(ke,null,[s(Ie,{class:"2xl:w-[35vw] xl:w-[50vw] w-full mx-auto"},{default:i(()=>[s(fo,{modelValue:J.value,"onUpdate:modelValue":d[0]||(d[0]=Q=>J.value=Q),cover:f(l).cover,cardId:f(k),boardId:f(l).board.id,listId:f(l).list.id,onUpdateCard:d[1]||(d[1]=Q=>Ce(Q)),onAddCardCover:d[2]||(d[2]=()=>lt(J.value))},null,8,["modelValue","cover","cardId","boardId","listId"]),s(Le,null,{default:i(()=>[_("div",wo,[_("div",ko,[f(l).title?(g(),X(Ot,{key:0,modelValue:q.value,"onUpdate:modelValue":d[3]||(d[3]=Q=>q.value=Q),onUpdate:d[4]||(d[4]=()=>bt(q.value)),class:"input text-2xl py-2 font-bold"},null,8,["modelValue"])):se("",!0),_("p",xo,[V(" in list "),_("span",Io,ce(f(l).list.name),1)])]),_("div",null,[s(ae,{variant:"text",icon:"",size:"27",onClick:f(C).$reset},{default:i(()=>[s(f(K),{icon:"ph:x",width:"20"})]),_:1},8,["onClick"])])]),s(kt,null,{default:i(()=>[s(rt,{cols:"12",md:"8"},{default:i(()=>{var Q,N,fe,Se,ut;return[So,s(co,{onOpenEditLabel:d[5]||(d[5]=E=>Te(E)),"board-id":f(l).board.id,"card-labels":f(l).labels,"onUpdate:cardLabels":d[6]||(d[6]=E=>f(l).labels=E),"list-id":f(l).list.id,"card-id":f(l).id,onUpdateCard:d[7]||(d[7]=E=>Ce(E)),cardLabelsCopy:A.value,"onUpdate:cardLabelsCopy":d[8]||(d[8]=E=>A.value=E),newLabelMenu:oe.value,"onUpdate:newLabelMenu":d[9]||(d[9]=E=>oe.value=E),"board-labels":f(l).board.labels},null,8,["board-id","card-labels","list-id","card-id","cardLabelsCopy","newLabelMenu","board-labels"]),(Q=f(l))!=null&&Q.endDate?(g(),O("div",Do,[_("div",Vo,[s(f(K),{icon:"ph:clock",width:"25"}),V(" Due date ")]),_("div",$o,[(g(),X(Oe,{key:f(l).isComplete,onChange:d[10]||(d[10]=()=>nt()),"hide-details":"",color:"primary",modelValue:f(l).isComplete,"onUpdate:modelValue":d[11]||(d[11]=E=>f(l).isComplete=E)},null,8,["modelValue"])),s(aa,{modelValue:P.value,"onUpdate:modelValue":d[12]||(d[12]=E=>P.value=E),"is-date-as-title":!0,"end-date":new Date((N=f(l))==null?void 0:N.endDate),"start-date":new Date(f(l).startDate),"is-complete":f(l).isComplete,"is-date-due":ot.value,"past-day":Ee.value,"is-in-less-than-day":ze.value,onSelectDate:d[13]||(d[13]=()=>x.selectDate()),onUpdateCardDates:d[14]||(d[14]=()=>Fe()),onOnDeleteDate:d[15]||(d[15]=()=>Ae())},null,8,["modelValue","end-date","start-date","is-complete","is-date-due","past-day","is-in-less-than-day"])])])):se("",!0),((fe=f(l))==null?void 0:fe.assignees.length)>0?(g(),O("div",To,[Lo,_("div",Uo,[(g(!0),O(ke,null,Ve((Se=f(l))==null?void 0:Se.assignees,E=>(g(),X(gt,{text:E.name,key:E.id},{activator:i(({props:Re})=>[s(ht,re({user:E},Re),null,16,["user"])]),_:2},1032,["text"]))),128)),s(ta,{mini:"",members:f(ge),modelValue:R.value,"onUpdate:modelValue":d[16]||(d[16]=E=>R.value=E),"card-id":f(l).id,onUpdateCard:d[17]||(d[17]=E=>Ce(E))},null,8,["members","modelValue","card-id"])])])):se("",!0),_("div",Mo,[s(yo,{description:f(l).description,cardId:f(k),boardId:f(l).board.id,listId:f(l).list.id,onUpdateCard:d[18]||(d[18]=E=>Ce(E))},null,8,["description","cardId","boardId","listId"]),_("div",null,[f(l).attachments&&f(l).attachments.length>0?(g(),O("div",jo,[s(f(K),{icon:"ph:paperclip",width:"25"}),V(" Attachments ")])):se("",!0),_("div",Ao,[(g(!0),O(ke,null,Ve(f(l).attachments,E=>(g(),X(Ss,{"card-id":f(l).id,"list-id":f(l).list.id,src:E,onUpdateCard:d[19]||(d[19]=Re=>Ce(Re))},null,8,["card-id","list-id","src"]))),256))])]),_("div",null,[f(l).checklist?(g(),X(Qs,{key:0,"card-id":f(l).id,"list-id":(ut=f(l))==null?void 0:ut.list.id,"board-id":f(l).board.id,class:"mt-5",modelValue:f(l).checklist,"onUpdate:modelValue":d[20]||(d[20]=E=>f(l).checklist=E),onUpdateCard:d[21]||(d[21]=E=>Ce(E)),onUpdateCardChecklist:d[22]||(d[22]=E=>at(E))},null,8,["card-id","list-id","board-id","modelValue"])):se("",!0)]),_("div",null,[_("div",Eo,[s(f(K),{icon:"ph:chat",width:"25"}),V(" Comments ")]),(g(!0),O(ke,null,Ve(f(l).comments,E=>(g(),X(eo,{key:E.id,"board-id":f(l).board.id,"card-id":f(l).id,comment:E},null,8,["board-id","card-id","comment"]))),128)),s(Ke,{onKeydown:vt(qe,["enter"]),modelValue:ye.value,"onUpdate:modelValue":d[23]||(d[23]=E=>ye.value=E),class:"mt-4","hide-details":"",density:"compact",placeholder:"write a comment"},{append:i(()=>[s(ae,{loading:we.value,disabled:we.value,variant:"tonal",color:"primary",onClick:qe},{default:i(()=>[V(" send ")]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"])])])]}),_:1}),s(rt,{cols:"12",md:"4"},{default:i(()=>{var Q;return[_("div",Po,[Oo,s(ta,{"card-id":f(l).id,members:f(ge),modelValue:R.value,"onUpdate:modelValue":d[24]||(d[24]=N=>R.value=N),onUpdateCard:d[25]||(d[25]=N=>Ce(N))},null,8,["card-id","members","modelValue"]),s(Ge,{"close-on-content-click":!1},{activator:i(({props:N})=>[s(ae,re(N,{class:"w-full",variant:"tonal"}),{prepend:i(()=>[s(f(K),{icon:"ph:tag",width:"20"})]),default:i(()=>[V(" Labels ")]),_:2},1040)]),default:i(()=>[s(Ie,{class:"relative"},{default:i(()=>[s(Qe,{class:"text-center relative"},{default:i(()=>[V(" Labels ")]),_:1}),s(Le,null,{default:i(()=>[s(yt,{modelValue:A.value,"onUpdate:modelValue":d[26]||(d[26]=N=>A.value=N),multiple:"",class:"space-y-2 my-2 w-96"},{default:i(()=>[(g(!0),O(ke,null,Ve(f(l).board.labels,N=>(g(),X(Ct,{value:N},{default:i(({isSelected:fe,toggle:Se})=>[_("div",Ro,[s(ae,{class:"w-11/12",color:N.color,onClick:()=>{Se(),Ne()}},Mt({default:i(()=>[N.title?(g(),O("p",Fo,ce(N.title.toUpperCase()),1)):se("",!0)]),_:2},[fe?{name:"prepend",fn:i(()=>[s(f(K),{icon:"ph:check",width:"20"})]),key:"0"}:void 0]),1032,["color","onClick"]),s(ae,{icon:"",variant:"text",size:"small",onClick:()=>Te(N)},{default:i(()=>[s(f(K),{icon:"ph:pencil-simple",width:"20"})]),_:2},1032,["onClick"])])]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),s(ae,{onClick:d[27]||(d[27]=N=>oe.value=!0),variant:"tonal",class:"w-full"},{default:i(()=>[V(" Add a new label ")]),_:1})]),_:1})]),_:1})]),_:1}),s(_s,{"card-id":f(l).id,"list-id":f(l).list.id,"board-id":f(l).board.id,checklist:f(l).checklist,onUpdateCard:d[28]||(d[28]=N=>Ce(N))},null,8,["card-id","list-id","board-id","checklist"]),s(aa,{modelValue:P.value,"onUpdate:modelValue":d[29]||(d[29]=N=>P.value=N),"is-date-as-title":!1,"end-date":new Date((Q=f(l))==null?void 0:Q.endDate),"start-date":new Date(f(l).startDate),"is-complete":f(l).isComplete,"is-date-due":ot.value,"past-day":Ee.value,"is-in-less-than-day":ze.value,onSelectDate:d[30]||(d[30]=()=>x.selectDate()),onUpdateCardDates:d[31]||(d[31]=()=>Fe()),onOnDeleteDate:d[32]||(d[32]=()=>Ae())},null,8,["modelValue","end-date","start-date","is-complete","is-date-due","past-day","is-in-less-than-day"]),s(Ge,null,{activator:i(({props:N})=>[s(ae,re(N,{class:"w-full",variant:"tonal"}),{prepend:i(()=>[s(f(K),{icon:"ph:paperclip",width:"20"})]),default:i(()=>[V(" Attachments ")]),_:2},1040)]),default:i(({isActive:N})=>[s(Ie,{class:"w-80"},{default:i(()=>[s(Le,null,{default:i(()=>[s(We,{multiple:"",modelValue:f(S),"onUpdate:modelValue":d[33]||(d[33]=fe=>na(S)?S.value=fe:S=fe),name:"attachments",label:"Attachments",accept:"image/*, application/pdf",variant:"solo-filled"},null,8,["modelValue"])]),_:1}),s(dt,{class:"flex justify-end self-end justify-self-end"},{default:i(()=>[s(ae,{variant:"outlined",color:"primary",onClick:fe=>N.value=!1},{default:i(()=>[V(" Cancel ")]),_:2},1032,["onClick"]),s(ae,{onClick:st,disabled:ue.value,loading:ue.value,variant:"flat",color:"primary"},{default:i(()=>[V(" Upload ")]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1}),s(Ge,null,{activator:i(({props:N})=>[s(ae,re(N,{class:"w-full",variant:"tonal"}),{prepend:i(()=>[s(f(K),{icon:"ph:image",width:"20"})]),default:i(()=>[V(" Cover ")]),_:2},1040)]),default:i(({isActive:N})=>[s(Ie,{class:"w-80"},{default:i(()=>[s(Le,null,{default:i(()=>[s(We,{modelValue:J.value,"onUpdate:modelValue":d[34]||(d[34]=fe=>J.value=fe),accept:"image/*",label:"Cover",variant:"solo-filled"},null,8,["modelValue"])]),_:1}),s(dt,{class:"flex justify-end self-end justify-self-end"},{default:i(()=>[s(ae,{variant:"outlined",color:"primary",onClick:fe=>N.value=!1},{default:i(()=>[V(" Cancel ")]),_:2},1032,["onClick"]),s(ae,{onClick:lt,disabled:ue.value,loading:ue.value,variant:"flat",color:"primary"},{default:i(()=>[V(" Upload ")]),_:1},8,["disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:1}),s(wt,{class:"bg-black opacity-100"}),s(ae,{class:"w-full",variant:"tonal",color:"error",onClick:d[35]||(d[35]=N=>T.value=!0)},{prepend:i(()=>[s(f(K),{icon:"ph:trash",width:"20"})]),default:i(()=>[V(" Delete ")]),_:1})])]}),_:1})]),_:1}),Bo]),_:1}),s(Je,{width:"500",modelValue:T.value,"onUpdate:modelValue":d[38]||(d[38]=Q=>T.value=Q)},{default:i(()=>[s(cs,{title:"Are you sure you want to delete this card?",text:"All progress and information in this card will be deleted","action-btn-text":"Delete",onCancel:d[36]||(d[36]=()=>T.value=!1),onDelete:d[37]||(d[37]=()=>it())})]),_:1},8,["modelValue"])]),_:1}),s(Je,{modelValue:oe.value,"onUpdate:modelValue":d[41]||(d[41]=Q=>oe.value=Q),width:"350",class:"w-max bg-red mx-auto",scrim:!1,"close-on-content-click":!1},{default:i(()=>[s(Ie,{class:"mx-auto",width:"350"},{default:i(()=>[s(Qe,{class:"text-center"},{default:i(()=>[V(" Add label ")]),_:1}),_("div",zo,[s(ae,{color:F.value,variant:"flat",class:"w-full"},{default:i(()=>[H.value?(g(),O("p",No,ce(H.value.toUpperCase()),1)):se("",!0)]),_:1},8,["color"])]),s(Le,null,{default:i(()=>[s(Ke,{label:"Title",modelValue:H.value,"onUpdate:modelValue":d[39]||(d[39]=Q=>H.value=Q)},null,8,["modelValue"]),s(ct,{class:"min-w-full","hide-inputs":"",modelValue:F.value,"onUpdate:modelValue":d[40]||(d[40]=Q=>F.value=Q),"hide-canvas":"","show-swatches":"",elevation:"0"},null,8,["modelValue"]),s(ae,{onClick:He,disabled:!F.value,color:"primary",class:"mt-2"},{default:i(()=>[V(" Create ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(g(),X(Je,{modelValue:ie.value,"onUpdate:modelValue":d[47]||(d[47]=Q=>ie.value=Q),key:ie.value,width:"350",class:"w-max bg-red mx-auto"},{default:i(()=>[s(Ie,{class:"mx-auto",width:"350"},{default:i(()=>[s(Qe,{class:"text-center"},{default:i(()=>[_("div",Ho,[qo,s(ae,{size:"x-small",icon:"",onClick:d[42]||(d[42]=()=>ie.value=!1)},{default:i(()=>[s(f(K),{icon:"ph:x",width:"25"})]),_:1})])]),_:1}),_("div",Ko,[s(ae,{color:le.value.color,variant:"flat",class:"w-full"},{default:i(()=>[le.value.title?(g(),O("p",Qo,ce(le.value.title.toUpperCase()),1)):se("",!0)]),_:1},8,["color"])]),s(Le,null,{default:i(()=>[s(Ke,{label:"Title",modelValue:le.value.title,"onUpdate:modelValue":d[43]||(d[43]=Q=>le.value.title=Q)},null,8,["modelValue"]),s(ct,{class:"min-w-full","hide-inputs":"",modelValue:le.value.color,"onUpdate:modelValue":d[44]||(d[44]=Q=>le.value.color=Q),"hide-canvas":"","show-swatches":"",elevation:"0"},null,8,["modelValue"]),_("div",Go,[s(ae,{onClick:d[45]||(d[45]=()=>$e(le.value.id)),color:"error",class:"mt-2"},{default:i(()=>[V(" Delete ")]),_:1}),s(ae,{onClick:d[46]||(d[46]=()=>Pe(le.value.id)),disabled:!le.value.color,color:"primary",class:"mt-2"},{default:i(()=>[V(" Update ")]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))],64)}}};export{ti as default};
