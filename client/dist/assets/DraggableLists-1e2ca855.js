import{r as I,O as k,T as y,aE as C,o as p,h as f,w as P,d as U,F as A,j as B,e as o,Z as D,az as E,aA as V,aF as F,l as g,ai as x}from"./index-0967322d.js";import{t as R}from"./vue-draggable-plus-b0ea375c.js";const j={__name:"DraggableLists",props:{isWorkspacePremium:Boolean},async setup(_){let l,c;const L=E(()=>V(()=>import("./List-53cf0423.js"),["assets/List-53cf0423.js","assets/index-0967322d.js","assets/index-90ed9cbc.css","assets/vue-draggable-plus-b0ea375c.js","assets/List-cc141bca.css"])),d=I(!1),u=k(),h=y(),{lists:s,isLoading:v}=([l,c]=C(()=>F(u.params.boardId)),l=await l,c(),l),m=(i,t)=>{g.put(`/list/${i}`,{position:t},{withCredentials:!0}).then(()=>{x.emit("update-lists",{boardId:u.params.boardId})}).catch(e=>{console.log(e)})},w=i=>{let t=i.newIndex,e=s.value[t-1],a=s.value[t+1],r=s.value[t].position;e&&a?r=(e.position+a.position)/2:e?r=e.position+e.position/2:a&&(r=a.position/2),m(i.item.id,r)},b=i=>{d.value=!0,g.delete(`/list/${i}`,{withCredentials:!0}).then(()=>{h.success("List was deleted"),x.emit("update-lists",{boardId:u.params.boardId})}).catch(t=>{console.log(t)}).finally(()=>{d.value=!1})};return(i,t)=>(p(),f(o(R),{ref:"el",group:"lists",handle:".header",modelValue:o(s),"onUpdate:modelValue":t[1]||(t[1]=e=>D(s)?s.value=e:null),animation:150,ghostClass:"ghost",class:"justify-between mx-3 max-h-[90%] flex flex-1 gap-3",scroll:"",scrollSensitivity:300,onUpdate:w,bubbleScroll:""},{default:P(()=>[(p(!0),U(A,null,B(o(s),(e,a)=>(p(),f(o(L),{key:e.id,"is-workspace-premium":_.isWorkspacePremium,"is-delete-loading":d.value,"is-list-loading":o(v),id:e.id.toString(),list:e,onDeleteList:t[0]||(t[0]=n=>b(n)),index:a,onUpdateIndex:n=>m(e.id,n)},null,8,["is-workspace-premium","is-delete-loading","is-list-loading","id","list","index","onUpdateIndex"]))),128))]),_:1},8,["modelValue"]))}};export{j as default};
