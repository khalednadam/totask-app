import{r as C,N as I,S as V,aD as B,c as D,e as l,o as r,d as f,j as g,f as P,g as U,F as _,h as x,w as E,Z as S,ay as A,az as N,aE as R,l as h}from"./index-33d3f48a.js";import{t as j}from"./vue-draggable-plus-18d3f938.js";const T={__name:"DraggableLists",props:{isWorkspacePremium:Boolean},async setup(v){let n,u;const k=A(()=>N(()=>import("./List-e86a2850.js"),["assets/List-e86a2850.js","assets/index-33d3f48a.js","assets/index-6d52b72e.css","assets/vue-draggable-plus-18d3f938.js","assets/List-13345cbb.css"])),d=C(!1),L=I(),w=V(),{lists:o,isLoading:c}=([n,u]=B(()=>R(L.params.boardId)),n=await n,u(),n),p=(a,s)=>{h.put(`/list/${a}`,{position:s},{withCredentials:!0}).then(()=>{}).catch(t=>{console.log(t)})},y=a=>{let s=a.newIndex,t=o.value[s-1],e=o.value[s+1],i=o.value[s].position;t&&e?i=(t.position+e.position)/2:t?i=t.position+t.position/2:e&&(i=e.position/2),p(a.item.id,i)},b=a=>{d.value=!0,h.delete(`/list/${a}`,{withCredentials:!0}).then(()=>{w.success("List was deleted")}).catch(s=>{console.log(s)}).finally(()=>{d.value=!1})};return(a,s)=>{const t=D("v-progress-circular");return l(c)?(r(),f(_,{key:0},g(4,e=>P("div",{key:e,class:"px-5"},[U(t,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"5"})])),64)):(r(),x(l(j),{key:1,ref:"el",group:"lists",handle:".header",modelValue:l(o),"onUpdate:modelValue":s[1]||(s[1]=e=>S(o)?o.value=e:null),animation:150,ghostClass:"ghost",class:"flex flex-shrink h-[70%] max-h-[70%] justify-between mx-3 gap-3 mb-3",scroll:"",scrollSensitivity:300,onUpdate:y,bubbleScroll:""},{default:E(()=>[(r(!0),f(_,null,g(l(o),(e,m)=>(r(),x(l(k),{key:e.id,"is-workspace-premium":v.isWorkspacePremium,"is-delete-loading":d.value,"is-list-loading":l(c),id:e.id.toString(),list:e,onDeleteList:s[0]||(s[0]=i=>b(i)),index:m,onUpdateIndex:i=>p(e.id,i)},null,8,["is-workspace-premium","is-delete-loading","is-list-loading","id","list","index","onUpdateIndex"]))),128))]),_:1},8,["modelValue"]))}}};export{T as default};
