import{aA as k,I as y,L as V,r as w,o as l,c as u,j as p,f as I,d as C,F as c,h as m,w as U,b as g,ax as B,ay as A,H as f,ag as x}from"./index-3ee1bcb6.js";import{t as D}from"./vue-draggable-plus-17eb67d2.js";const S={__name:"DraggableLists",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(h){const a=k(h,"modelValue"),v=B(()=>A(()=>import("./List-1426f849.js"),["assets/List-1426f849.js","assets/index-3ee1bcb6.js","assets/index-b726fc83.css","assets/vue-draggable-plus-17eb67d2.js","assets/List-8637c473.css"])),n=y(),L=V(),r=(s,t)=>{f.put(`/list/${s}`,{position:t},{withCredentials:!0}).then(()=>{x.emit("update-lists",n.params.boardId)}).catch(o=>{console.log(o)})},_=s=>{let t=s.newIndex,o=a.value[t-1],e=a.value[t+1],i=a.value[t].position;o&&e?i=(o.position+e.position)/2:o?i=o.position+o.position/2:e&&(i=e.position/2),r(s.item.id,i)},b=s=>{f.delete(`/list/${s}`,{withCredentials:!0}).then(()=>{L.success("List was deleted"),x.emit("update-lists",n.params.boardId)}).catch(t=>{console.log(t)})};return(s,t)=>{const o=w("v-progress-circular");return s.isLoading?(l(),u(c,{key:0},p(4,e=>I("div",{key:e,class:"px-5"},[C(o,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"5"})])),64)):(l(),m(g(D),{key:1,ref:"el",group:"lists",handle:".header",modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),animation:150,ghostClass:"ghost",class:"flex flex-shrink h-[70%] max-h-[70%] justify-between mx-3 gap-3 mb-3",scroll:"",scrollSensitivity:300,onUpdate:_,bubbleScroll:""},{default:U(()=>[(l(!0),u(c,null,p(a.value,(e,d)=>(l(),m(g(v),{key:e.id,"is-list-loading":s.isLoading,id:e.id.toString(),list:e,onDeleteList:t[0]||(t[0]=i=>b(i)),index:d,onUpdateIndex:i=>r(e.id,i)},null,8,["is-list-loading","id","list","index","onUpdateIndex"]))),128))]),_:1},8,["modelValue"]))}}};export{S as default};
