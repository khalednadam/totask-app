import{J as w,M as I,aC as C,r as V,b as n,o as r,c as _,j as x,f as U,d as B,F as f,h as g,w as D,W as A,ax as E,ay as P,aD as R,I as h,ag as v}from"./index-a062139e.js";import{t as S}from"./vue-draggable-plus-80ac6a0e.js";const T={__name:"DraggableLists",async setup(j){let l,p;const L=E(()=>P(()=>import("./List-6d5234dc.js"),["assets/List-6d5234dc.js","assets/index-a062139e.js","assets/index-142f3828.css","assets/vue-draggable-plus-80ac6a0e.js","assets/List-8637c473.css"])),d=w(),b=I(),{lists:o,isLoading:c}=([l,p]=C(()=>R(d.params.boardId)),l=await l,p(),l),u=(a,t)=>{h.put(`/list/${a}`,{position:t},{withCredentials:!0}).then(()=>{v.emit("update-lists",d.params.boardId)}).catch(s=>{console.log(s)})},y=a=>{let t=a.newIndex,s=o.value[t-1],e=o.value[t+1],i=o.value[t].position;s&&e?i=(s.position+e.position)/2:s?i=s.position+s.position/2:e&&(i=e.position/2),u(a.item.id,i)},k=a=>{h.delete(`/list/${a}`,{withCredentials:!0}).then(()=>{b.success("List was deleted"),v.emit("update-lists",d.params.boardId)}).catch(t=>{console.log(t)})};return(a,t)=>{const s=V("v-progress-circular");return n(c)?(r(),_(f,{key:0},x(4,e=>U("div",{key:e,class:"px-5"},[B(s,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"5"})])),64)):(r(),g(n(S),{key:1,ref:"el",group:"lists",handle:".header",modelValue:n(o),"onUpdate:modelValue":t[1]||(t[1]=e=>A(o)?o.value=e:null),animation:150,ghostClass:"ghost",class:"flex flex-shrink h-[70%] max-h-[70%] justify-between mx-3 gap-3 mb-3",scroll:"",scrollSensitivity:300,onUpdate:y,bubbleScroll:""},{default:D(()=>[(r(!0),_(f,null,x(n(o),(e,m)=>(r(),g(n(L),{key:e.id,"is-list-loading":n(c),id:e.id.toString(),list:e,onDeleteList:t[0]||(t[0]=i=>k(i)),index:m,onUpdateIndex:i=>u(e.id,i)},null,8,["is-list-loading","id","list","index","onUpdateIndex"]))),128))]),_:1},8,["modelValue"]))}}};export{T as default};
