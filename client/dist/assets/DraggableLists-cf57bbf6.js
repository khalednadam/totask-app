import{J as I,M as C,aC as V,r as D,b as l,o as r,c as _,j as g,f as U,d as B,F as x,h,w as A,W as E,ax as P,ay as R,aD as S,I as v,ag as L}from"./index-436d2018.js";import{t as j}from"./vue-draggable-plus-dbba2a9b.js";const $={__name:"DraggableLists",async setup(F){let n,p;const y=P(()=>R(()=>import("./List-e71d94f5.js"),["assets/List-e71d94f5.js","assets/index-436d2018.js","assets/index-142f3828.css","assets/vue-draggable-plus-dbba2a9b.js","assets/List-8fd8eb25.css"])),d=ref(!1),u=I(),b=C(),{lists:a,isLoading:c}=([n,p]=V(()=>S(u.params.boardId)),n=await n,p(),n),m=(o,t)=>{v.put(`/list/${o}`,{position:t},{withCredentials:!0}).then(()=>{L.emit("update-lists",u.params.boardId)}).catch(s=>{console.log(s)})},k=o=>{let t=o.newIndex,s=a.value[t-1],e=a.value[t+1],i=a.value[t].position;s&&e?i=(s.position+e.position)/2:s?i=s.position+s.position/2:e&&(i=e.position/2),m(o.item.id,i)},w=o=>{d.value=!0,v.delete(`/list/${o}`,{withCredentials:!0}).then(()=>{b.success("List was deleted"),L.emit("update-lists",u.params.boardId)}).catch(t=>{console.log(t)}).finally(()=>{d.value=!1})};return(o,t)=>{const s=D("v-progress-circular");return l(c)?(r(),_(x,{key:0},g(4,e=>U("div",{key:e,class:"px-5"},[B(s,{color:"primary",indeterminate:"disable-shrink",size:"50",width:"5"})])),64)):(r(),h(l(j),{key:1,ref:"el",group:"lists",handle:".header",modelValue:l(a),"onUpdate:modelValue":t[1]||(t[1]=e=>E(a)?a.value=e:null),animation:150,ghostClass:"ghost",class:"flex flex-shrink h-[70%] max-h-[70%] justify-between mx-3 gap-3 mb-3",scroll:"",scrollSensitivity:300,onUpdate:k,bubbleScroll:""},{default:A(()=>[(r(!0),_(x,null,g(l(a),(e,f)=>(r(),h(l(y),{key:e.id,"is-delete-loading":l(d),"is-list-loading":l(c),id:e.id.toString(),list:e,onDeleteList:t[0]||(t[0]=i=>w(i)),index:f,onUpdateIndex:i=>m(e.id,i)},null,8,["is-delete-loading","is-list-loading","id","list","index","onUpdateIndex"]))),128))]),_:1},8,["modelValue"]))}}};export{$ as default};
