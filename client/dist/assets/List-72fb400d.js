import{p as pe,ad as ve,T as me,r as x,aL as fe,s as xe,G as _e,c as _,ax as Ce,o as d,h as C,w as a,g as s,m as O,f,e as c,I as g,d as h,t as ge,ar as K,i as S,F as z,j as F,ag as W,k as I,Z as he,V as G,az as M,aA as Z,l as L,ai as y,n as V,y as ye,z as we}from"./index-5f832ffb.js";import{t as be}from"./vue-draggable-plus-5726a612.js";const q=n=>(ye("data-v-ac347459"),n=n(),we(),n),ke={class:""},Le={class:"flex items-center cursor-grab"},Ve={key:1,class:"w-full"},De=q(()=>f("p",{class:"mb-2"}," Change list color ",-1)),Ae={class:"flex gap-2"},Ee={class:"flex mt-2 gap-2"},Ie={class:"overflow-hidden flex-col flex max-h-[70vh]"},Be={class:"overflow-y-auto px-2 flex-1 max-h-full"},Ne={class:"px-2 z-50 mb-2"},Se={class:"px-2"},ze=q(()=>f("div",null,[f("p",{class:"text-start text-md"},"Add a card")],-1)),Fe={class:"gap-2 flex"},$e={__name:"List",props:{list:Object,index:Number,members:Array,isListLoading:Boolean,isDeleteLoading:Boolean,isWorkspacePremium:Boolean},emits:["deleteList","updateIndex"],setup(n,{emit:Te}){var U;const H=M(()=>Z(()=>import("./DeleteModal-067e79ff.js"),["assets/DeleteModal-067e79ff.js","assets/index-5f832ffb.js","assets/index-5ed3e7d4.css"])),J=M(()=>Z(()=>import("./Card-4aa8b367.js"),["assets/Card-4aa8b367.js","assets/DeleteModal-067e79ff.js","assets/index-5f832ffb.js","assets/index-5ed3e7d4.css","assets/Board-a55fceea.js","assets/favoriteBoards-a9091e34.js","assets/Board-e64c6962.css","assets/Card-8dc16711.css"])),r=n,Q=ve(),$=me(),X=x(null),B=x((U=r.list)==null?void 0:U.name),b=x(""),k=x(!1),D=x(!1),{cards:p,isLoading:Y}=fe(r.list.id,r.list.board),w=x(!1),A=x("");xe(Q);const E=x(!1),ee=t=>{k.value=!0,b.value=t},T=["#4BCE97","#F5CD47","#FEA362","#9F8FEF","#6CC3E0","#94C748","#E774BB","#579DFF"],te=()=>{k.value=!1,se(),b.value=""},P=()=>{E.value=!0,L.post("/card/create",{board:r.list.board,list:r.list.id,title:A.value},{withCredentials:!0}).then(t=>{y.emit("update-cards",r.list.board,[r.list.id]),A.value="",p.value.push(t.data),$.success("card added")}).catch(t=>{V(t)}).finally(()=>{E.value=!1})},le=t=>{L.delete(`/card/${t}`,{withCredentials:!0}).then(()=>{y.emit("update-cards",r.list.board,[r.list.id]),$.success("card was deleted"),y.emit("delete-card",t)}).catch(e=>{V(e)})},se=()=>{L.put(`/list/${r.list.id}`,{name:b.value}).then(t=>{B.value=t.data.name,y.emit("update-lists",{boardId:t.data.board,results:t.data})}).catch(t=>{V(t)})},R=(t,e,i,l)=>{L.put(`/card/${t}`,{position:l,list:e},{params:{sortBy:"position:asc"},withCredentials:!0}).then(()=>{y.emit("update-cards",r.list.board,[e,i]),y.emit("update-card",t)}).catch(o=>{V(o)})},ae=t=>{let e=t.newIndex,i=p.value[e-1],l=p.value[e+1],o=p.value[e],u=(o==null?void 0:o.position)||1024;i&&l?u=(i.position+l.position)/2:i?u=i.position+i.position/2:l?u=l.position/2:u=1024,R(o.id,r.list.id,o.list.id,u)},oe=t=>{let e=t.newIndex,i=p.value[e-1],l=p.value[e+1],o=p.value[e],u=(o==null?void 0:o.position)||1024;i&&l?u=(i.position+l.position)/2:i?u=i.position+i.position/2:l?u=l.position/2:u=1024,R(o.id,r.list.id,o.list.id,u)},ie=x(1),N=t=>{L.put(`/list/${r.list.id}`,{color:t}).then(e=>{B.value=e.data.name,y.emit("update-lists",{boardId:e.data.board,results:e.data})}).catch(e=>{V(e)})};return _e(p,()=>{ie.value=1}),(t,e)=>{const i=_("v-text-field"),l=_("v-btn"),o=_("v-list-item"),u=_("v-list"),de=_("v-menu"),ne=_("v-card-title"),re=_("v-tooltip"),ue=_("v-dialog"),ce=_("v-card"),j=Ce("click-outside");return d(),C(ce,{variant:"elevated",rounded:"lg",color:n.list.color||"list",class:"w-[272px] flex-1 flex h-max overflow-y-hidden",id:n.list.id.toString()},{default:a(()=>[s(re,{text:n.list.name},{activator:a(({props:v})=>[s(ne,O(v,{class:"flex sticky z-20 flex-row items-center justify-between header"}),{default:a(()=>[f("div",ke,[f("div",Le,[s(c(g),{icon:"ph:dots-six-vertical-bold",class:"opacity-50 mr-1",width:"30"}),k.value?K((d(),h("div",Ve,[s(i,{class:"text-2xl input",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=m=>b.value=m),"hide-details":"",autofocus:""},null,8,["modelValue"])])),[[j,te]]):(d(),h("div",{key:0,onClick:e[0]||(e[0]=()=>ee(B.value)),class:"w-full max-w-[90%] truncate items-center cursor-pointer text-xl py-2 pr-2 m-[0.5px]"},ge(n.list.name),1)),s(de,{rounded:"lg"},{activator:a(({props:m})=>[k.value?S("",!0):(d(),C(l,O({key:0,icon:"",variant:"text",size:"30",class:"bg-blue-200"},m),{default:a(()=>[s(c(g),{icon:"ph:dots-three-outline-fill"})]),_:2},1040))]),default:a(()=>[s(u,{rounded:"lg"},{default:a(()=>[n.isWorkspacePremium?(d(),C(o,{key:0,rounded:!1},{default:a(()=>[De,f("div",Ae,[(d(!0),h(z,null,F(T.slice(0,4),m=>(d(),C(l,{onClick:()=>N(m),flat:"",style:W({backgroundColor:m}),class:"h-8 cursor-pointer flex w-12 rounded-lg"},null,8,["onClick","style"]))),256))]),f("div",Ee,[(d(!0),h(z,null,F(T.slice(4,8),m=>(d(),C(l,{onClick:()=>N(m),flat:"",style:W({backgroundColor:m}),class:"h-8 cursor-pointer flex w-12 rounded-lg"},null,8,["onClick","style"]))),256))]),s(l,{onClick:e[2]||(e[2]=()=>N(null)),class:"w-full mt-2",variant:"tonal"},{default:a(()=>[I(" Remove list color ")]),_:1})]),_:1})):S("",!0),s(o,{onClick:e[3]||(e[3]=()=>w.value=!0),density:"compact",rounded:!1},{prepend:a(()=>[s(c(g),{icon:"ph:plus-circle",width:"25"})]),default:a(()=>[I(" Add card ")]),_:1}),s(o,{onClick:e[4]||(e[4]=m=>D.value=!0),disabled:n.isDeleteLoading,loading:n.isDeleteLoading,"base-color":"error",density:"compact",rounded:!1},{prepend:a(()=>[s(c(g),{icon:"ph:trash",width:"25"})]),default:a(()=>[I(" Delete this list ")]),_:1},8,["disabled","loading"])]),_:1})]),_:2},1024),k.value?(d(),C(l,{key:2,icon:"",variant:"tonal",color:"primary",size:"35",class:"mx-1"},{default:a(()=>[s(c(g),{icon:"ph:check"})]),_:1})):S("",!0)])])]),_:2},1040)]),_:1},8,["text"]),f("div",Ie,[f("div",Be,[(d(),C(c(be),{ref_key:"el",ref:X,group:"cards",class:"space-y-3 relative",modelValue:c(p),"onUpdate:modelValue":e[6]||(e[6]=v=>he(p)?p.value=v:null),animation:150,dragClass:"drag",ghostClass:"ghost",onUpdate:ae,scroll:"",scrollSensitivity:300,bubbleScroll:"",onAdd:oe,key:c(Y)},{default:a(()=>[(d(!0),h(z,null,F(c(p),v=>(d(),C(c(J),{key:v.id,listName:n.list.name,card:v,onDeleteCard:e[5]||(e[5]=m=>le(m))},null,8,["listName","card"]))),128))]),_:1},8,["modelValue"]))]),K((d(),h("div",Ne,[w.value?(d(),h("div",{key:1,class:"flex flex-col gap-2 px-1 pt-2 pb-2",onKeypress:e[11]||(e[11]=G(v=>P(),["enter"])),onKeydown:e[12]||(e[12]=G(v=>w.value=!1,["esc"]))},[s(i,{"single-line":"",autofocus:"",modelValue:A.value,"onUpdate:modelValue":e[8]||(e[8]=v=>A.value=v),placeholder:"Enter a title for this card",rows:"2","no-resize":"","hide-details":""},null,8,["modelValue"]),f("div",Fe,[s(l,{color:"primary",loading:E.value,disabled:E.value,onClick:e[9]||(e[9]=()=>P())},{default:a(()=>[I(" Add ")]),_:1},8,["loading","disabled"]),s(l,{variant:"text",icon:"",size:"35",onClick:e[10]||(e[10]=()=>w.value=!1)},{default:a(()=>[s(c(g),{icon:"ph:x",width:"25"})]),_:1})])],32)):(d(),C(l,{key:0,class:"w-full my-1 flex justify-start p-1",height:"40",variant:"text",onClick:e[7]||(e[7]=()=>w.value=!0)},{default:a(()=>[f("div",Se,[s(c(g),{icon:"ph:plus",width:"20"})]),ze]),_:1}))])),[[j,()=>w.value=!1]])]),s(ue,{width:"500",modelValue:D.value,"onUpdate:modelValue":e[15]||(e[15]=v=>D.value=v)},{default:a(()=>[s(c(H),{title:"Are you sure you want to delete this list?",text:"All cards in this list will be deleted","action-btn-text":"Delete",onCancel:e[13]||(e[13]=()=>D.value=!1),onDelete:e[14]||(e[14]=()=>t.$emit("deleteList",n.list.id))})]),_:1},8,["modelValue"])]),_:1},8,["color","id"])}}},Ue=pe($e,[["__scopeId","data-v-ac347459"]]);export{Ue as default};
