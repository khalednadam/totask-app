const __vite__fileDeps=["assets/DeleteModal-6joRgP_K.js","assets/index-BheaLR3J.js","assets/index-BHzV6MsY.css","assets/Card-D2GPdYXY.js","assets/Board-e81esBel.js","assets/favoriteBoards-CBiGK1zj.js","assets/Board-DS-2eqXT.css","assets/Card-tW8IySSJ.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as re,ac as ue,L as ce,k as v,aG as pe,a7 as me,A as ve,r as f,o as u,h as x,w as s,d as l,O as R,f as _,c as C,t as fe,b as c,M as w,i as N,e as T,F as M,j as P,V as xe,Q as K,aw as F,ax as q,H as S,ai as k,p as _e,q as ye}from"./index-BheaLR3J.js";import{o as G}from"./Board-e81esBel.js";import{t as ge}from"./vue-draggable-plus-oXuFHbV8.js";import"./favoriteBoards-CBiGK1zj.js";const Ce=p=>(_e("data-v-117c779c"),p=p(),ye(),p),we={class:"flex justify-between items-center"},ke={class:"overflow-y-auto px-2"},be={key:0},he={class:"px-2"},Ve=Ce(()=>_("div",null,[_("p",{class:"text-start text-md"},"Add a card")],-1)),Le={class:"gap-2 flex"},Ae={__name:"List",props:{list:Object,index:Number,members:Array,isListLoading:Boolean},emits:["deleteList","updateIndex"],setup(p,{emit:Ne}){var j;const H=F(()=>q(()=>import("./DeleteModal-6joRgP_K.js"),__vite__mapDeps([0,1,2]))),Q=F(()=>q(()=>import("./Card-D2GPdYXY.js"),__vite__mapDeps([3,1,2,0,4,5,6,7]))),d=p,J=ue(),D=ce(),W=v(null),I=v((j=d.list)==null?void 0:j.name),b=v(""),E=v(null),h=v(!1),V=v(!1),{cards:m,isLoading:$}=pe(d.list.id,d.list.board),y=v(!1),L=v(""),z=v(null);me(J);const A=v(!1),X=t=>{h.value=!0,b.value=t},Y=()=>{h.value=!1,O(),b.value=""},B=()=>{A.value=!0,S.post("/card/create",{board:d.list.board,list:d.list.id,title:L.value},{withCredentials:!0}).then(t=>{k.emit("update-cards",d.list.board,[d.list.id]),L.value="",m.value.push(t.data),D.success("card added")}).catch(t=>{console.log(t)}).finally(()=>{A.value=!1})},Z=t=>{S.delete(`/card/${t}`,{withCredentials:!0}).then(()=>{k.emit("update-cards",d.list.board,[d.list.id]),D.success("card was deleted"),k.emit("delete-card",t)}).catch(e=>{console.log(e)})};G(E,()=>Y()),G(z,()=>y.value=!1);const O=()=>{S.put(`/list/${d.list.id}`,{name:b.value},{withCredentials:!0}).then(t=>{I.value=t.data.name,k.emit("update-lists",t.data.board)}).catch(t=>{console.log(t)})},U=(t,e,o,a)=>{S.put(`/card/${t}`,{position:a,list:e},{params:{sortBy:"position:asc"},withCredentials:!0}).then(()=>{k.emit("update-cards",d.list.board,[e,o]),k.emit("update-card",t)}).catch(i=>{console.log(i)})},ee=t=>{let e=t.newIndex,o=m.value[e-1],a=m.value[e+1],i=m.value[e],r=(i==null?void 0:i.position)||1024;o&&a?r=(o.position+a.position)/2:o?r=o.position+o.position/2:a?r=a.position/2:r=1024,U(i.id,d.list.id,i.list.id,r)},te=t=>{let e=t.newIndex,o=m.value[e-1],a=m.value[e+1],i=m.value[e],r=(i==null?void 0:i.position)||1024;o&&a?r=(o.position+a.position)/2:o?r=o.position+o.position/2:a?r=a.position/2:r=1024,U(i.id,d.list.id,i.list.id,r)},le=v(1);return ve(m,()=>{le.value=1}),(t,e)=>{const o=f("v-text-field"),a=f("v-btn"),i=f("v-list-item"),r=f("v-list"),ae=f("v-menu"),se=f("v-card-title"),oe=f("v-tooltip"),ie=f("v-skeleton-loader"),ne=f("v-dialog"),de=f("v-card");return u(),x(de,{rounded:"lg",color:"list",class:"w-[272px] mt-3 h-max max-h-max mb-5",id:p.list.id.toString()},{default:s(()=>[l(oe,{text:p.list.name},{activator:s(({props:n})=>[l(se,R(n,{class:"flex sticky z-20 flex-row items-center justify-between header"}),{default:s(()=>[_("div",we,[h.value?(u(),C("div",{key:1,ref_key:"renameTarget",ref:E,class:"w-full"},[l(o,{class:"text-2xl input",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=g=>b.value=g),"hide-details":"",autofocus:""},null,8,["modelValue"])],512)):(u(),C("div",{key:0,onClick:e[0]||(e[0]=()=>X(I.value)),class:"w-max max-w-[88%] truncate cursor-pointer text-xl py-2 px-2 m-[0.5px]"},fe(p.list.name),1)),l(ae,{rounded:"lg"},{activator:s(({props:g})=>[h.value?N("",!0):(u(),x(a,R({key:0,icon:"",variant:"text",size:"30",class:"bg-blue-200"},g),{default:s(()=>[l(c(w),{icon:"ph:dots-three-outline-fill"})]),_:2},1040))]),default:s(()=>[l(r,{rounded:"lg"},{default:s(()=>[l(i,{onClick:e[2]||(e[2]=()=>y.value=!0),density:"compact",rounded:!1},{prepend:s(()=>[l(c(w),{icon:"ph:plus-circle",width:"25"})]),default:s(()=>[T(" Add card ")]),_:1}),l(i,{onClick:e[3]||(e[3]=g=>V.value=!0),"base-color":"error",density:"compact",rounded:!1},{prepend:s(()=>[l(c(w),{icon:"ph:trash",width:"25"})]),default:s(()=>[T(" Delete this list ")]),_:1})]),_:1})]),_:2},1024),h.value?(u(),x(a,{key:2,icon:"",variant:"tonal",color:"primary",size:"35",class:"mx-1",onClick:e[4]||(e[4]=()=>O(p.list.id))},{default:s(()=>[l(c(w),{icon:"ph:check"})]),_:1})):N("",!0)])]),_:2},1040)]),_:1},8,["text"]),_("div",ke,[c($)||p.isListLoading?(u(),C("div",be,[(u(!0),C(M,null,P(Math.floor(Math.random()*3)+1,n=>(u(),x(ie,{key:n,class:"my-3",type:"card-avatar"}))),128))])):N("",!0),c($)?N("",!0):(u(),x(c(ge),{key:1,ref_key:"el",ref:W,group:"cards",class:"space-y-3",modelValue:c(m),"onUpdate:modelValue":e[6]||(e[6]=n=>xe(m)?m.value=n:null),animation:150,dragClass:"drag",ghostClass:"ghost",onUpdate:ee,scroll:"",scrollSensitivity:300,bubbleScroll:"",onAdd:te},{default:s(()=>[(u(!0),C(M,null,P(c(m),n=>(u(),x(c(Q),{key:n.id,listName:p.list.name,card:n,onDeleteCard:e[5]||(e[5]=g=>Z(g))},null,8,["listName","card"]))),128))]),_:1},8,["modelValue"]))]),_("div",{class:"px-2 block z-50 mb-2",ref_key:"addNewCardTarget",ref:z},[y.value?(u(),C("div",{key:1,class:"flex flex-col gap-2 px-1 pt-2 pb-2",onKeypress:e[11]||(e[11]=K(n=>B(),["enter"])),onKeydown:e[12]||(e[12]=K(n=>y.value=!1,["esc"]))},[l(o,{"single-line":"",autofocus:"",modelValue:L.value,"onUpdate:modelValue":e[8]||(e[8]=n=>L.value=n),placeholder:"Enter a title for this card",rows:"2","no-resize":"","hide-details":""},null,8,["modelValue"]),_("div",Le,[l(a,{color:"primary",loading:A.value,disabled:A.value,onClick:e[9]||(e[9]=()=>B())},{default:s(()=>[T(" Add ")]),_:1},8,["loading","disabled"]),l(a,{variant:"text",icon:"",size:"35",onClick:e[10]||(e[10]=()=>y.value=!1)},{default:s(()=>[l(c(w),{icon:"ph:x",width:"25"})]),_:1})])],32)):(u(),x(a,{key:0,class:"w-full my-1 flex justify-start p-1",height:"40",variant:"text",onClick:e[7]||(e[7]=()=>y.value=!0)},{default:s(()=>[_("div",he,[l(c(w),{icon:"ph:plus",width:"20"})]),Ve]),_:1}))],512),l(ne,{width:"500",modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=n=>V.value=n)},{default:s(()=>[l(c(H),{title:"Are you sure you want to delete this list?",text:"All cards in this list will be deleted","action-btn-text":"Delete",onCancel:e[13]||(e[13]=()=>V.value=!1),onDelete:e[14]||(e[14]=()=>t.$emit("deleteList",p.list.id))})]),_:1},8,["modelValue"])]),_:1},8,["id"])}}},Ee=re(Ae,[["__scopeId","data-v-117c779c"]]);export{Ee as default};
