import{n as ce,ac as ve,S as pe,r as x,aK as me,s as fe,E as xe,c as _,aw as _e,o as n,h as g,w as s,g as o,m as j,f,d as C,t as ge,aq as K,e as m,I as h,i as N,F as I,j as F,af as O,k as E,Y as Ce,U as W,ay as q,az as M,l as b,ah as L,x as ye,y as he}from"./index-54c549f8.js";import{t as we}from"./vue-draggable-plus-4fe0bfed.js";const Y=d=>(ye("data-v-0eed16a3"),d=d(),he(),d),ke={class:"flex justify-between items-center"},be={key:1,class:"w-full"},Le=Y(()=>f("p",{class:"mb-2"}," Change list color ",-1)),Ve={class:"flex gap-2"},De={class:"flex mt-2 gap-2"},Ae={class:"overflow-hidden flex-col flex max-h-[70vh]"},Ee={class:"overflow-y-auto px-2 flex-1 max-h-full"},Se={class:"px-2 z-50 mb-2"},Be={class:"px-2"},Ne=Y(()=>f("div",null,[f("p",{class:"text-start text-md"},"Add a card")],-1)),Ie={class:"gap-2 flex"},Fe={__name:"List",props:{list:Object,index:Number,members:Array,isListLoading:Boolean,isDeleteLoading:Boolean,isWorkspacePremium:Boolean},emits:["deleteList","updateIndex"],setup(d,{emit:ze}){var R;const G=q(()=>M(()=>import("./DeleteModal-e7d2321d.js"),["assets/DeleteModal-e7d2321d.js","assets/index-54c549f8.js","assets/index-c289598b.css"])),H=q(()=>M(()=>import("./Card-641a1b68.js"),["assets/Card-641a1b68.js","assets/index-54c549f8.js","assets/index-c289598b.css","assets/DeleteModal-e7d2321d.js","assets/Board-bfba2007.js","assets/favoriteBoards-388afa88.js","assets/Board-87e9ec92.css","assets/Card-b14bc89d.css"])),r=d,J=ve(),z=pe(),Q=x(null),S=x((R=r.list)==null?void 0:R.name),w=x(""),k=x(!1),V=x(!1),{cards:c,isLoading:X}=me(r.list.id,r.list.board),y=x(!1),D=x("");fe(J);const A=x(!1),Z=t=>{k.value=!0,w.value=t},$=["#4BCE97","#F5CD47","#FEA362","#9F8FEF","#6CC3E0","#94C748","#E774BB","#579DFF"],ee=()=>{k.value=!1,le(),w.value=""},U=()=>{A.value=!0,b.post("/card/create",{board:r.list.board,list:r.list.id,title:D.value},{withCredentials:!0}).then(t=>{L.emit("update-cards",r.list.board,[r.list.id]),D.value="",c.value.push(t.data),z.success("card added")}).catch(t=>{console.log(t)}).finally(()=>{A.value=!1})},te=t=>{b.delete(`/card/${t}`,{withCredentials:!0}).then(()=>{L.emit("update-cards",r.list.board,[r.list.id]),z.success("card was deleted"),L.emit("delete-card",t)}).catch(e=>{console.log(e)})},le=()=>{b.put(`/list/${r.list.id}`,{name:w.value}).then(t=>{S.value=t.data.name}).catch(t=>{console.log(t)})},P=(t,e,i,l)=>{b.put(`/card/${t}`,{position:l,list:e},{params:{sortBy:"position:asc"},withCredentials:!0}).then(()=>{L.emit("update-cards",r.list.board,[e,i]),L.emit("update-card",t)}).catch(a=>{console.log(a)})},se=t=>{let e=t.newIndex,i=c.value[e-1],l=c.value[e+1],a=c.value[e],u=(a==null?void 0:a.position)||1024;i&&l?u=(i.position+l.position)/2:i?u=i.position+i.position/2:l?u=l.position/2:u=1024,P(a.id,r.list.id,a.list.id,u)},oe=t=>{let e=t.newIndex,i=c.value[e-1],l=c.value[e+1],a=c.value[e],u=(a==null?void 0:a.position)||1024;i&&l?u=(i.position+l.position)/2:i?u=i.position+i.position/2:l?u=l.position/2:u=1024,P(a.id,r.list.id,a.list.id,u)},ae=x(1),B=t=>{b.put(`/list/${r.list.id}`,{color:t}).then(e=>{S.value=e.data.name}).catch(e=>{console.log(e)})};return xe(c,()=>{ae.value=1}),(t,e)=>{const i=_("v-text-field"),l=_("v-btn"),a=_("v-list-item"),u=_("v-list"),ie=_("v-menu"),ne=_("v-card-title"),de=_("v-tooltip"),re=_("v-dialog"),ue=_("v-card"),T=_e("click-outside");return n(),g(ue,{variant:"elevated",rounded:"lg",color:d.list.color||"list",class:"w-[272px] flex-1 flex h-max overflow-y-hidden",id:d.list.id.toString()},{default:s(()=>[o(de,{text:d.list.name},{activator:s(({props:v})=>[o(ne,j(v,{class:"flex sticky z-20 flex-row items-center justify-between header"}),{default:s(()=>[f("div",ke,[k.value?K((n(),C("div",be,[o(i,{class:"text-2xl input",modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=p=>w.value=p),"hide-details":"",autofocus:""},null,8,["modelValue"])])),[[T,ee]]):(n(),C("div",{key:0,onClick:e[0]||(e[0]=()=>Z(S.value)),class:"w-max max-w-[88%] truncate cursor-pointer text-xl py-2 px-2 m-[0.5px]"},ge(d.list.name),1)),o(ie,{rounded:"lg"},{activator:s(({props:p})=>[k.value?N("",!0):(n(),g(l,j({key:0,icon:"",variant:"text",size:"30",class:"bg-blue-200"},p),{default:s(()=>[o(m(h),{icon:"ph:dots-three-outline-fill"})]),_:2},1040))]),default:s(()=>[o(u,{rounded:"lg"},{default:s(()=>[d.isWorkspacePremium?(n(),g(a,{key:0,rounded:!1},{default:s(()=>[Le,f("div",Ve,[(n(!0),C(I,null,F($.slice(0,4),p=>(n(),g(l,{onClick:()=>B(p),flat:"",style:O({backgroundColor:p}),class:"h-8 cursor-pointer flex w-12 rounded-lg"},null,8,["onClick","style"]))),256))]),f("div",De,[(n(!0),C(I,null,F($.slice(4,8),p=>(n(),g(l,{onClick:()=>B(p),flat:"",style:O({backgroundColor:p}),class:"h-8 cursor-pointer flex w-12 rounded-lg"},null,8,["onClick","style"]))),256))]),o(l,{onClick:e[2]||(e[2]=()=>B(null)),class:"w-full mt-2",variant:"tonal"},{default:s(()=>[E(" Remove list color ")]),_:1})]),_:1})):N("",!0),o(a,{onClick:e[3]||(e[3]=()=>y.value=!0),density:"compact",rounded:!1},{prepend:s(()=>[o(m(h),{icon:"ph:plus-circle",width:"25"})]),default:s(()=>[E(" Add card ")]),_:1}),o(a,{onClick:e[4]||(e[4]=p=>V.value=!0),disabled:d.isDeleteLoading,loading:d.isDeleteLoading,"base-color":"error",density:"compact",rounded:!1},{prepend:s(()=>[o(m(h),{icon:"ph:trash",width:"25"})]),default:s(()=>[E(" Delete this list ")]),_:1},8,["disabled","loading"])]),_:1})]),_:2},1024),k.value?(n(),g(l,{key:2,icon:"",variant:"tonal",color:"primary",size:"35",class:"mx-1"},{default:s(()=>[o(m(h),{icon:"ph:check"})]),_:1})):N("",!0)])]),_:2},1040)]),_:1},8,["text"]),f("div",Ae,[f("div",Ee,[(n(),g(m(we),{ref_key:"el",ref:Q,group:"cards",class:"space-y-3 relative",modelValue:m(c),"onUpdate:modelValue":e[6]||(e[6]=v=>Ce(c)?c.value=v:null),animation:150,dragClass:"drag",ghostClass:"ghost",onUpdate:se,scroll:"",scrollSensitivity:300,bubbleScroll:"",onAdd:oe,key:m(X)},{default:s(()=>[(n(!0),C(I,null,F(m(c),v=>(n(),g(m(H),{key:v.id,listName:d.list.name,card:v,onDeleteCard:e[5]||(e[5]=p=>te(p))},null,8,["listName","card"]))),128))]),_:1},8,["modelValue"]))]),K((n(),C("div",Se,[y.value?(n(),C("div",{key:1,class:"flex flex-col gap-2 px-1 pt-2 pb-2",onKeypress:e[11]||(e[11]=W(v=>U(),["enter"])),onKeydown:e[12]||(e[12]=W(v=>y.value=!1,["esc"]))},[o(i,{"single-line":"",autofocus:"",modelValue:D.value,"onUpdate:modelValue":e[8]||(e[8]=v=>D.value=v),placeholder:"Enter a title for this card",rows:"2","no-resize":"","hide-details":""},null,8,["modelValue"]),f("div",Ie,[o(l,{color:"primary",loading:A.value,disabled:A.value,onClick:e[9]||(e[9]=()=>U())},{default:s(()=>[E(" Add ")]),_:1},8,["loading","disabled"]),o(l,{variant:"text",icon:"",size:"35",onClick:e[10]||(e[10]=()=>y.value=!1)},{default:s(()=>[o(m(h),{icon:"ph:x",width:"25"})]),_:1})])],32)):(n(),g(l,{key:0,class:"w-full my-1 flex justify-start p-1",height:"40",variant:"text",onClick:e[7]||(e[7]=()=>y.value=!0)},{default:s(()=>[f("div",Be,[o(m(h),{icon:"ph:plus",width:"20"})]),Ne]),_:1}))])),[[T,()=>y.value=!1]])]),o(re,{width:"500",modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=v=>V.value=v)},{default:s(()=>[o(m(G),{title:"Are you sure you want to delete this list?",text:"All cards in this list will be deleted","action-btn-text":"Delete",onCancel:e[13]||(e[13]=()=>V.value=!1),onDelete:e[14]||(e[14]=()=>t.$emit("deleteList",d.list.id))})]),_:1},8,["modelValue"])]),_:1},8,["color","id"])}}},Pe=ce(Fe,[["__scopeId","data-v-0eed16a3"]]);export{Pe as default};
