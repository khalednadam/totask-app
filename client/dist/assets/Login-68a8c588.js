import{Q as I,u as K,T as L,r as d,l as S,n as U,c,o as m,d as Z,f as t,g as a,w as n,e as o,I as v,V as k,h as b,k as f}from"./index-62a9dab2.js";import{u as E,a as V}from"./vee-validate.esm-412fddff.js";const M={class:"flex flex-col gap-5"},N=t("div",null,[t("h1",{class:"text-7xl mb-10 text-primary"},"Login")],-1),T=t("div",null,[t("p",null,"Email")],-1),D={class:"w-full flex justify-between"},R=t("p",null,"Password",-1),j=t("p",{class:"cursor-pointer"},"forgot your passowrd?",-1),q={class:"underline cursor-pointer"},J={__name:"Login",setup(Q){const _=I(),C=K();L();const z=[e=>!!e||"Required.",e=>e&&e.length>=8||"Min 8 characters",e=>/\d/.test(e)&&/[a-zA-Z]/.test(e)||"Password must contain at least one letter and one number"],{handleSubmit:P,isSubmitting:$}=E({validationSchema:{password(e){return(e==null?void 0:e.length)>=2?!0:"Please enter a valid password"},email(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/i.test(e)?!0:"Please enter a valid email"}}}),r=V("email"),i=V("password"),g=d(),l=d(!1),A=d(),u=d(!1),w=P(async()=>{u.value=!0,S.post("/auth/login",{email:r.value.value,password:i.value.value}).then(e=>{A.value=e.session,C.getUser(),_.push("/")}).catch(e=>{U(e)}).finally(()=>{u.value=!1})}),B=()=>_.go(-1);return(e,s)=>{const y=c("v-btn"),h=c("v-text-field"),x=c("router-link"),F=c("v-form");return m(),Z("div",null,[t("div",M,[a(y,{onClick:B,icon:"",variant:"tonal",size:"small",color:"primary",class:""},{default:n(()=>[a(o(v),{icon:"ph:caret-left",class:"text-primary",width:"25"})]),_:1}),N]),a(F,{class:"my-auto flex flex-col"},{default:n(()=>[T,a(h,{autofocus:"",onKeydown:s[0]||(s[0]=k(()=>g.value.focus(),["enter"])),modelValue:o(r).value.value,"onUpdate:modelValue":s[1]||(s[1]=p=>o(r).value.value=p),"error-messages":o(r).errorMessage.value},null,8,["modelValue","error-messages"]),t("div",D,[R,a(x,{to:"/forgot-password"},{default:n(()=>[j]),_:1})]),a(h,{rules:z,onKeydown:k(o(w),["enter"]),ref_key:"passwordField",ref:g,"error-messages":o(i).errorMessage.value,modelValue:o(i).value.value,"onUpdate:modelValue":s[4]||(s[4]=p=>o(i).value.value=p),type:l.value?"text":"password"},{"append-inner":n(()=>[l.value?(m(),b(o(v),{key:0,onClick:s[2]||(s[2]=()=>l.value=!l.value),icon:"ph:eye-closed-bold",width:"30",class:"cursor-pointer"})):(m(),b(o(v),{key:1,onClick:s[3]||(s[3]=()=>l.value=!l.value),icon:"ph:eye-bold",width:"30",class:"cursor-pointer"}))]),_:1},8,["onKeydown","error-messages","modelValue","type"]),t("div",null,[t("p",null,[f(" Don't have an account? "),t("span",q,[a(x,{to:"/register"},{default:n(()=>[f(" Create one ")]),_:1})])])]),a(y,{class:"self-end",onClick:s[5]||(s[5]=()=>o(w)()),variant:"tonal",color:"primary",loading:u.value,disabled:u.value},{default:n(()=>[f(" Login ")]),_:1},8,["loading","disabled"])]),_:1})])}}};export{J as default};
