import{S as C,P as F,u as I,r as d,l as K,c,o as v,d as L,g as n,w as r,f as t,U as x,e as o,h as k,I as b,k as f}from"./index-f5a8608f.js";import{u as M,a as V}from"./vee-validate.esm-f32a281b.js";const Z=C(),E=_=>{const p=_.response.data.message;Z.error(p)},N=t("h1",{class:"text-7xl mb-10 text-primary"},"Login",-1),D=t("div",null,[t("p",null,"Email")],-1),R={class:"w-full flex justify-between"},T=t("p",null,"Password",-1),j=t("p",{class:"cursor-pointer"},"forgot your passowrd?",-1),q={class:"underline cursor-pointer"},J={__name:"Login",setup(_){const p=F(),P=I();C();const S=[e=>!!e||"Required.",e=>e&&e.length>=8||"Min 8 characters",e=>/\d/.test(e)&&/[a-zA-Z]/.test(e)||"Password must contain at least one letter and one number"],{handleSubmit:U,isSubmitting:$}=M({validationSchema:{password(e){return(e==null?void 0:e.length)>=2?!0:"Please enter a valid password"},email(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/i.test(e)?!0:"Please enter a valid email"}}}),l=V("email"),u=V("password"),g=d(),a=d(!1),z=d(),i=d(!1),w=U(async()=>{i.value=!0,K.post("/auth/login",{email:l.value.value,password:u.value.value}).then(e=>{z.value=e.session,P.getUser(),p.push("/")}).catch(e=>{E(e),console.log(e)}).finally(()=>{i.value=!1})});return(e,s)=>{const y=c("v-text-field"),h=c("router-link"),A=c("v-btn"),B=c("v-form");return v(),L("div",null,[N,n(B,{class:"my-auto flex flex-col"},{default:r(()=>[D,n(y,{autofocus:"",onKeydown:s[0]||(s[0]=x(()=>g.value.focus(),["enter"])),modelValue:o(l).value.value,"onUpdate:modelValue":s[1]||(s[1]=m=>o(l).value.value=m),"error-messages":o(l).errorMessage.value},null,8,["modelValue","error-messages"]),t("div",R,[T,n(h,{to:"/forgot-password"},{default:r(()=>[j]),_:1})]),n(y,{rules:S,onKeydown:x(o(w),["enter"]),ref_key:"passwordField",ref:g,"error-messages":o(u).errorMessage.value,modelValue:o(u).value.value,"onUpdate:modelValue":s[4]||(s[4]=m=>o(u).value.value=m),type:a.value?"text":"password"},{"append-inner":r(()=>[a.value?(v(),k(o(b),{key:0,onClick:s[2]||(s[2]=()=>a.value=!a.value),icon:"ph:eye-closed-bold",width:"30",class:"cursor-pointer"})):(v(),k(o(b),{key:1,onClick:s[3]||(s[3]=()=>a.value=!a.value),icon:"ph:eye-bold",width:"30",class:"cursor-pointer"}))]),_:1},8,["onKeydown","error-messages","modelValue","type"]),t("div",null,[t("p",null,[f(" Don't have an account? "),t("span",q,[n(h,{to:"/register"},{default:r(()=>[f(" Create one ")]),_:1})])])]),n(A,{class:"self-end",onClick:s[5]||(s[5]=()=>o(w)()),variant:"tonal",color:"primary",loading:i.value,disabled:i.value},{default:r(()=>[f(" Login ")]),_:1},8,["loading","disabled"])]),_:1})])}}};export{J as default};
