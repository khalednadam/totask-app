import{O as S,Q as $,r as u,S as D,G as E,c as t,o as i,d as v,g as e,w as l,f as y,F as w,j as k,h as F,k as d,t as h,l as p}from"./index-1550b417.js";const A=y("div",{class:"mt-3 flex justify-between"},[y("h1",null," Premium Requests ")],-1),O={__name:"PremiumRequests",setup(G){const x=S();$();const o=u(!1),_=u(!1),m=u([]),c=u(Number(x.query.page)||1),r=async()=>{_.value=!0;try{const a=await p.get("/premium-request/all",{params:{limit:9,page:c.value}});console.log(a),m.value=a.data}catch(a){console.log(a)}finally{_.value=!1}};D(async()=>{await r()});const b=async a=>{o.value=!0;try{await p.post(`/premium-request/accept/${a}`),await r()}catch(s){console.log(s)}finally{o.value=!1}},q=async a=>{o.value=!0;try{await p.delete(`/premium-request/${a}`),await r()}catch(s){console.log(s)}finally{o.value=!1}},C=()=>{window.history.replaceState(null,"",`?page=${c.value}`)};return E(c,()=>{r()},{deep:!0,immediate:!0}),(a,s)=>{const R=t("v-skeleton-loader"),f=t("v-col"),V=t("v-card-title"),B=t("v-card-text"),g=t("v-btn"),N=t("v-card-actions"),P=t("v-card"),j=t("v-row"),L=t("v-pagination");return i(),v("div",null,[A,e(j,{class:"mt-5"},{default:l(()=>[_.value?(i(),v(w,{key:0},k(12,n=>e(f,{cols:"12",md:"3"},{default:l(()=>[e(R,{type:"card"})]),_:1})),64)):(i(!0),v(w,{key:1},k(m.value.results,n=>(i(),F(f,{cols:"12",md:"3"},{default:l(()=>[e(P,null,{default:l(()=>[e(V,null,{default:l(()=>[d(h(n.workspace.name),1)]),_:2},1024),e(B,null,{default:l(()=>[d(" By: @"+h(n.user.username),1)]),_:2},1024),e(N,{class:"flex items-center justify-center"},{default:l(()=>[e(g,{loading:o.value,disabled:o.value,onClick:()=>q(n.id),variant:"flat",color:"error",class:"w-1/2"},{default:l(()=>[d(" Decline ")]),_:2},1032,["loading","disabled","onClick"]),e(g,{loading:o.value,disabled:o.value,onClick:()=>b(n.id),variant:"flat",color:"primary",class:"w-1/2"},{default:l(()=>[d(" Accept ")]),_:2},1032,["loading","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(L,{modelValue:c.value,"onUpdate:modelValue":[s[0]||(s[0]=n=>c.value=n),s[1]||(s[1]=n=>C())],color:"primary",length:m.value.totalPages,rounded:"large"},null,8,["modelValue","length"])])}}};export{O as default};
