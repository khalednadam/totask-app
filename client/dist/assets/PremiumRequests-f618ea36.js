import{N as $,P as D,r,Q as E,c as l,o as u,d as m,g as a,w as o,f as y,F as w,j as k,h as F,k as i,t as h,l as p}from"./index-4bf4ff79.js";const S=y("div",{class:"mt-3 flex justify-between"},[y("h1",null," Premium Requests ")],-1),Q={__name:"PremiumRequests",setup(A){const x=$();D();const s=r(!1),d=r(!1),_=r([]),c=r(x.query.page||1),v=async()=>{d.value=!0;try{const e=await p.get("/premium-request/all",{params:{limit:12,page:c.value}});console.log(e),_.value=e.data}catch(e){console.log(e)}finally{d.value=!1}};E(async()=>{await v()});const b=e=>{window.history.replaceState(null,"",`?page=${e}`),c.value=e},q=async e=>{s.value=!0;try{await p.post(`/premium-request/accept/${e}`),await v()}catch(n){console.log(n)}finally{s.value=!1}},C=async e=>{s.value=!0;try{await p.delete(`/premium-request/${e}`),await v()}catch(n){console.log(n)}finally{s.value=!1}};return(e,n)=>{const R=l("v-skeleton-loader"),f=l("v-col"),V=l("v-card-title"),B=l("v-card-text"),g=l("v-btn"),N=l("v-card-actions"),P=l("v-card"),j=l("v-row"),L=l("v-pagination");return u(),m("div",null,[S,a(j,{class:"mt-5"},{default:o(()=>[d.value?(u(),m(w,{key:0},k(12,t=>a(f,{cols:"12",md:"3"},{default:o(()=>[a(R,{type:"card"})]),_:1})),64)):(u(!0),m(w,{key:1},k(_.value.results,t=>(u(),F(f,{cols:"12",md:"3"},{default:o(()=>[a(P,null,{default:o(()=>[a(V,null,{default:o(()=>[i(h(t.workspace.name),1)]),_:2},1024),a(B,null,{default:o(()=>[i(" By: @"+h(t.user.username),1)]),_:2},1024),a(N,{class:"flex items-center justify-center"},{default:o(()=>[a(g,{loading:s.value,disabled:s.value,onClick:()=>C(t.id),variant:"flat",color:"error",class:"w-1/2"},{default:o(()=>[i(" Decline ")]),_:2},1032,["loading","disabled","onClick"]),a(g,{loading:s.value,disabled:s.value,onClick:()=>q(t.id),variant:"flat",color:"primary",class:"w-1/2"},{default:o(()=>[i(" Accept ")]),_:2},1032,["loading","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),a(L,{modelValue:c.value,"onUpdate:modelValue":[n[0]||(n[0]=t=>c.value=t),n[1]||(n[1]=t=>b(t))],color:"primary",length:_.value.totalPages,rounded:"large"},null,8,["modelValue","length"])])}}};export{Q as default};
