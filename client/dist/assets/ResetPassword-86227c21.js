import{L as S,M as B,O as N,r as w,K as R,c as v,o as n,d as M,g as u,w as d,U as I,e,f as l,h as i,I as c,k as U}from"./index-f1a2c0d1.js";import{u as F,a as _}from"./vee-validate.esm-688f0661.js";const T=l("h1",{class:"text-7xl mb-10 text-primary"},"Reset Passowrd",-1),q=l("div",null,[l("p",null,"New password")],-1),z=l("div",null,[l("p",null,"New password confirmation")],-1),L={__name:"ResetPassword",setup(A){const g=S(),x=B(),f=N(),{handleSubmit:b,isSubmitting:P}=F({validationSchema:{password(s){return(s==null?void 0:s.length)>=2?!0:"Please enter a valid password"},confirmPassword(s){return s===r.value.value||(s==null?void 0:s.length)<2?!0:"Passwords doesn't match"}}}),t=w(!1),a=w(!1),r=_("password"),p=_("confirmPassword"),h=w(g.query.token),y=b(async()=>{R.post("/auth/reset-password",{password:r.value.value},{params:{token:h.value},headers:{Authorization:`Bearer ${h.value}`},withCredentials:!0}).then(s=>{f.success("Password was reset successfully"),x.push("/login")}).catch(s=>{console.log(s),f.error("Resetting password failed")})});return(s,o)=>{const k=v("v-text-field"),C=v("v-btn"),V=v("v-form");return n(),M("div",null,[T,u(V,{class:"my-auto flex flex-col",onSubmit:I(e(y),["prevent"])},{default:d(()=>[q,u(k,{autofocus:"","error-messages":e(r).errorMessage.value,modelValue:e(r).value.value,"onUpdate:modelValue":o[2]||(o[2]=m=>e(r).value.value=m),type:t.value?"text":"password"},{"append-inner":d(()=>[t.value?(n(),i(e(c),{key:0,onClick:o[0]||(o[0]=()=>t.value=!t.value),icon:"ph:eye-closed-bold",width:"30",class:"cursor-pointer"})):(n(),i(e(c),{key:1,onClick:o[1]||(o[1]=()=>t.value=!t.value),icon:"ph:eye-bold",width:"30",class:"cursor-pointer"}))]),_:1},8,["error-messages","modelValue","type"]),z,u(k,{modelValue:e(p).value.value,"onUpdate:modelValue":o[5]||(o[5]=m=>e(p).value.value=m),"error-messages":e(p).errorMessage.value,type:a.value?"text":"password"},{"append-inner":d(()=>[a.value?(n(),i(e(c),{key:0,onClick:o[3]||(o[3]=()=>a.value=!a.value),icon:"ph:eye-closed-bold",width:"30",class:"cursor-pointer"})):(n(),i(e(c),{key:1,onClick:o[4]||(o[4]=()=>a.value=!a.value),icon:"ph:eye-bold",width:"30",class:"cursor-pointer"}))]),_:1},8,["modelValue","error-messages","type"]),u(C,{class:"self-end",onClick:e(y),variant:"tonal",loading:e(P),color:"primary"},{default:d(()=>[U(" Submit ")]),_:1},8,["onClick","loading"])]),_:1},8,["onSubmit"])])}}};export{L as default};
