import{I as G,L as J,a as K,a5 as O,a6 as P,k as _,A as Q,r as l,o as c,c as k,f as w,t as X,b as o,d as a,w as s,F as g,H as L,M as I,j as N,i as b,h as B,e as h}from"./index-DlTV-5Qr.js";import{_ as Y,A as Z}from"./AddNewBoardButton-BhcE4lBl.js";import ee from"./DangerDeleteModal-ccLfOogY.js";import"./favoriteBoards-CMBukpun.js";const ae={class:"flex gap-2 items-center"},oe={class:"pt-2 pb-4"},te={class:"space-x-2"},ce={__name:"WorkspaceBoards",setup(se){const p=G(),$=J(),{boards:x,isLoading:v}=K(p.params.workspaceId),{closedBoards:A,closedBoardsLoading:T}=O(p.params.workspaceId),{workspace:n}=P(p.params.workspaceId),i=_(!1),C=_(!1),d=_(!1),F=[{title:"Name",value:"name"},{title:"Actions",key:"actions",sortable:!1}],R=r=>{v.value=!0,L.delete(`/b/${r}`,{withCredentials:!0}).then(t=>{$.success("Deleted"),i.value=!1,d.value=!1}).catch(t=>{console.log(t)}).finally(()=>{v.value=!1})},U=r=>{C.value=!0,L.put(`/b/${r.id}`,{workspace:r.workspace.id,closed:!1},{withCredentials:!0}).then(t=>{i.value=!1}).catch(t=>{console.log(t)}).finally(()=>{C.value=!1})},u=_(null),W=r=>{u.value=r,d.value=!0};return Q(d,()=>{d||(u.value=null)}),(r,t)=>{var y,V,D;const m=l("v-btn"),j=l("router-link"),E=l("v-skeleton-loader"),f=l("v-col"),H=l("v-row"),M=l("v-data-table"),S=l("v-card-text"),q=l("v-card"),z=l("v-dialog");return c(),k(g,null,[w("div",ae,[w("h1",oe,X((y=o(n))==null?void 0:y.name),1),a(j,{to:`/w/settings/${(V=o(n))==null?void 0:V.id}`},{default:s(()=>[a(m,{icon:"",variant:"text"},{default:s(()=>[a(o(I),{icon:"ph:pencil-simple-line",width:"25"})]),_:1})]),_:1},8,["to"])]),a(H,null,{default:s(()=>[o(v)?(c(),k(g,{key:0},N(3,e=>a(f,{cols:"12",md:"3",key:e},{default:s(()=>[a(E,{class:"h-[125px] overflow-hidden rounded-lg",rounded:"lg",type:"card"})]),_:2},1024)),64)):b("",!0),(c(!0),k(g,null,N(o(x),e=>(c(),B(f,{cols:"12",md:"3",key:e.id},{default:s(()=>[a(Y,{board:e},null,8,["board"])]),_:2},1024))),128)),o(n)?(c(),B(f,{cols:"12",md:"3",key:o(n)},{default:s(()=>{var e;return[o(n)?(c(),B(Z,{workspace:(e=o(n))==null?void 0:e.id,key:o(n),onClick:()=>{},members:o(n).members,boards:o(x)},null,8,["workspace","members","boards"])):b("",!0)]}),_:1})):b("",!0)]),_:1}),a(m,{class:"mt-5",onClick:t[0]||(t[0]=e=>i.value=!0)},{default:s(()=>[h(" View closed boards ")]),_:1}),a(z,{width:"500",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:s(()=>[a(q,null,{default:s(()=>[a(S,null,{default:s(()=>[a(M,{headers:F,items:o(A)},{"item.exclusive":s(({item:e})=>[]),"item.actions":s(({item:e})=>[w("div",te,[a(m,{color:"error",variant:"flat",onClick:()=>W(e)},{default:s(()=>[a(o(I),{icon:"ph:x"}),h(" Delete ")]),_:2},1032,["onClick"]),a(m,{onClick:()=>U(e),color:"primary",variant:"flat"},{default:s(()=>[h(" Reopen ")]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ee,{name:(D=u.value)==null?void 0:D.name,isLoading:o(T),modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),onDelete:t[3]||(t[3]=()=>R(u.value.id))},null,8,["name","isLoading","modelValue"])],64)}}};export{ce as default};
