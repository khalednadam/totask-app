import{N as H,S as J,a as K,a7 as M,a8 as O,r as _,E as P,c as l,o as d,d as p,f as g,t as Q,e as o,g as a,w as s,F as v,l as D,I as N,j as I,h as b,i as X,k as B}from"./index-c4cb6045.js";import{A as Y,_ as Z}from"./AddNewBoardButton-2b65cb26.js";import ee from"./DangerDeleteModal-24a0e1f1.js";import"./favoriteBoards-012023f2.js";const ae={class:"flex gap-2 items-center"},oe={class:"pt-2 pb-4"},te={class:"space-x-2"},ce={__name:"WorkspaceBoards",setup(se){const f=H(),L=J(),{boards:h,isLoading:k}=K(f.params.workspaceId),{closedBoards:$,closedBoardsLoading:A}=M(f.params.workspaceId),{workspace:n}=O(f.params.workspaceId),i=_(!1),x=_(!1),c=_(!1),T=[{title:"Name",value:"name"},{title:"Actions",key:"actions",sortable:!1}],E=r=>{k.value=!0,D.delete(`/b/${r}`,{withCredentials:!0}).then(t=>{L.success("Deleted"),i.value=!1,c.value=!1}).catch(t=>{console.log(t)}).finally(()=>{k.value=!1})},F=r=>{x.value=!0,D.put(`/b/${r.id}`,{workspace:r.workspace.id,closed:!1},{withCredentials:!0}).then(t=>{i.value=!1}).catch(t=>{console.log(t)}).finally(()=>{x.value=!1})},u=_(null),R=r=>{u.value=r,c.value=!0};return P(c,()=>{c||(u.value=null)}),(r,t)=>{var C,y,V;const m=l("v-btn"),S=l("router-link"),U=l("v-skeleton-loader"),w=l("v-col"),W=l("v-row"),j=l("v-data-table"),q=l("v-card-text"),z=l("v-card"),G=l("v-dialog");return d(),p(v,null,[g("div",ae,[g("h1",oe,Q((C=o(n))==null?void 0:C.name),1),a(S,{to:`/w/settings/${(y=o(n))==null?void 0:y.id}`},{default:s(()=>[a(m,{icon:"",variant:"text"},{default:s(()=>[a(o(N),{icon:"ph:pencil-simple-line",width:"25"})]),_:1})]),_:1},8,["to"])]),a(W,null,{default:s(()=>[o(k)?(d(),p(v,{key:0},I(3,e=>a(w,{cols:"12",md:"3",key:e},{default:s(()=>[a(U,{class:"h-[125px] overflow-hidden rounded-lg",rounded:"lg",type:"card"})]),_:2},1024)),64)):(d(),p(v,{key:1},[o(n)&&o(n).isAdmin?(d(),b(w,{cols:"12",md:"3",key:o(n)},{default:s(()=>{var e;return[(d(),b(Y,{"is-card":!0,workspace:(e=o(n))==null?void 0:e.id,key:o(n),onClick:()=>{},members:o(n).members,boards:o(h)},null,8,["workspace","members","boards"]))]}),_:1})):X("",!0),(d(!0),p(v,null,I(o(h),e=>(d(),b(w,{cols:"12",md:"3",key:e.id},{default:s(()=>[a(Z,{board:e},null,8,["board"])]),_:2},1024))),128))],64))]),_:1}),a(m,{class:"mt-5",onClick:t[0]||(t[0]=e=>i.value=!0)},{default:s(()=>[B(" View closed boards ")]),_:1}),a(G,{width:"500",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:s(()=>[a(z,null,{default:s(()=>[a(q,null,{default:s(()=>[a(j,{headers:T,items:o($)},{"item.exclusive":s(({item:e})=>[]),"item.actions":s(({item:e})=>[g("div",te,[a(m,{color:"error",variant:"flat",onClick:()=>R(e)},{default:s(()=>[a(o(N),{icon:"ph:x"}),B(" Delete ")]),_:2},1032,["onClick"]),a(m,{onClick:()=>F(e),color:"primary",variant:"flat"},{default:s(()=>[B(" Reopen ")]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ee,{name:(V=u.value)==null?void 0:V.name,isLoading:o(A),modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),onDelete:t[3]||(t[3]=()=>E(u.value.id))},null,8,["name","isLoading","modelValue"])],64)}}};export{ce as default};
