import{L as z,O as G,a as H,a6 as J,a7 as M,r as _,C as P,c as l,o as d,d as p,f as g,t as Q,e as o,g as a,w as s,F as v,K as D,I as L,j as I,h as b,i as X,k as B}from"./index-3856c7a6.js";import{A as Y,_ as Z}from"./AddNewBoardButton-ef5f2485.js";import ee from"./DangerDeleteModal-df05e99b.js";import"./favoriteBoards-1086643c.js";const ae={class:"flex gap-2 items-center"},oe={class:"pt-2 pb-4"},te={class:"space-x-2"},ce={__name:"WorkspaceBoards",setup(se){const f=z(),N=G(),{boards:h,isLoading:k}=H(f.params.workspaceId),{closedBoards:$,closedBoardsLoading:A}=J(f.params.workspaceId),{workspace:n}=M(f.params.workspaceId),i=_(!1),C=_(!1),c=_(!1),T=[{title:"Name",value:"name"},{title:"Actions",key:"actions",sortable:!1}],F=r=>{k.value=!0,D.delete(`/b/${r}`,{withCredentials:!0}).then(t=>{N.success("Deleted"),i.value=!1,c.value=!1}).catch(t=>{console.log(t)}).finally(()=>{k.value=!1})},R=r=>{C.value=!0,D.put(`/b/${r.id}`,{workspace:r.workspace.id,closed:!1},{withCredentials:!0}).then(t=>{i.value=!1}).catch(t=>{console.log(t)}).finally(()=>{C.value=!1})},u=_(null),U=r=>{u.value=r,c.value=!0};return P(c,()=>{c||(u.value=null)}),(r,t)=>{var x,y,V;const m=l("v-btn"),W=l("router-link"),j=l("v-skeleton-loader"),w=l("v-col"),E=l("v-row"),K=l("v-data-table"),O=l("v-card-text"),S=l("v-card"),q=l("v-dialog");return d(),p(v,null,[g("div",ae,[g("h1",oe,Q((x=o(n))==null?void 0:x.name),1),a(W,{to:`/w/settings/${(y=o(n))==null?void 0:y.id}`},{default:s(()=>[a(m,{icon:"",variant:"text"},{default:s(()=>[a(o(L),{icon:"ph:pencil-simple-line",width:"25"})]),_:1})]),_:1},8,["to"])]),a(E,null,{default:s(()=>[o(k)?(d(),p(v,{key:0},I(3,e=>a(w,{cols:"12",md:"3",key:e},{default:s(()=>[a(j,{class:"h-[125px] overflow-hidden rounded-lg",rounded:"lg",type:"card"})]),_:2},1024)),64)):(d(),p(v,{key:1},[o(n)&&o(n).isAdmin?(d(),b(w,{cols:"12",md:"3",key:o(n)},{default:s(()=>{var e;return[(d(),b(Y,{"is-card":!0,workspace:(e=o(n))==null?void 0:e.id,key:o(n),onClick:()=>{},members:o(n).members,boards:o(h)},null,8,["workspace","members","boards"]))]}),_:1})):X("",!0),(d(!0),p(v,null,I(o(h),e=>(d(),b(w,{cols:"12",md:"3",key:e.id},{default:s(()=>[a(Z,{board:e},null,8,["board"])]),_:2},1024))),128))],64))]),_:1}),a(m,{class:"mt-5",onClick:t[0]||(t[0]=e=>i.value=!0)},{default:s(()=>[B(" View closed boards ")]),_:1}),a(q,{width:"500",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:s(()=>[a(S,null,{default:s(()=>[a(O,null,{default:s(()=>[a(K,{headers:T,items:o($)},{"item.exclusive":s(({item:e})=>[]),"item.actions":s(({item:e})=>[g("div",te,[a(m,{color:"error",variant:"flat",onClick:()=>U(e)},{default:s(()=>[a(o(L),{icon:"ph:x"}),B(" Delete ")]),_:2},1032,["onClick"]),a(m,{onClick:()=>R(e),color:"primary",variant:"flat"},{default:s(()=>[B(" Reopen ")]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ee,{name:(V=u.value)==null?void 0:V.name,isLoading:o(A),modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),onDelete:t[3]||(t[3]=()=>F(u.value.id))},null,8,["name","isLoading","modelValue"])],64)}}};export{ce as default};
