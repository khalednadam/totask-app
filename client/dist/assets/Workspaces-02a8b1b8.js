import{r as m,c as r,o as i,d as p,g as s,w as v,f as c,t as y,l as k,n as b,O as x,v as B,G as P,P as $,e as C,I as W,F as j,j as I,h as L}from"./index-feb0c145.js";const U={key:0},q={key:1},E={__name:"WorkspaceCard",props:{workspace:Object},setup(o){const f=o,e=m(!1),_=async u=>{e.value=!0;try{await k.put(`/w/${f.workspace.id}`,{isPremium:u},{})}catch(a){b(a)}finally{e.value=!1}};return(u,a)=>{const g=r("v-switch"),t=r("v-card-text"),l=r("v-card");return i(),p("div",null,[s(l,null,{default:v(()=>[s(t,null,{default:v(()=>{var w;return[c("div",null,[c("h3",null,y(o.workspace.name),1)]),c("div",null,[o.workspace.createdBy?(i(),p("p",U," Created by: @"+y((w=o.workspace.createdBy)==null?void 0:w.username),1)):(i(),p("p",q)),s(g,{inset:"",loading:e.value,disabled:e.value,"onUpdate:modelValue":[a[0]||(a[0]=d=>_(d)),a[1]||(a[1]=d=>o.workspace.isPremium=d)],label:"Premium",color:"primary",modelValue:o.workspace.isPremium},null,8,["loading","disabled","modelValue"])])]}),_:1})]),_:1})])}}},F={class:"flex justify-between items-center"},N=c("h1",{class:"my-5"}," Workspaces ",-1),O={class:"w-1/2"},A={__name:"Workspaces",setup(o){const f=x(),e=m(null),_=m(!1),u=m({}),a=m(f.query.page||1),g=async()=>{_.value=!0;try{const t=await k.get("/w/",{params:{limit:12,page:a.value,name:e.value,sortBy:"createdAt:desc"},withCredentials:!0});u.value=t.data}catch(t){console.log(t)}finally{_.value=!1}};return B(async()=>{await g()}),P(e,$(async()=>{var t;((t=e.value)==null?void 0:t.trim().length)===0&&typeof e.value=="string"&&(e.value=null),await g()},500)),(t,l)=>{const w=r("v-text-field"),d=r("v-col"),h=r("v-row"),V=r("v-pagination");return i(),p("div",null,[c("div",F,[N,c("div",O,[s(w,{clearable:"","hide-details":"",label:"Search",modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value=n)},{"append-inner":v(()=>[s(C(W),{icon:"ph:magnifying-glass",width:"25"})]),_:1},8,["modelValue"])])]),c("div",null,[s(h,null,{default:v(()=>[(i(!0),p(j,null,I(u.value.results,n=>(i(),L(d,{cols:"12",md:"4",key:n._id},{default:v(()=>[s(E,{workspace:n},null,8,["workspace"])]),_:2},1024))),128))]),_:1})]),s(V,{modelValue:a.value,"onUpdate:modelValue":[l[1]||(l[1]=n=>a.value=n),l[2]||(l[2]=n=>t.$router.replace({query:{page:a.value}}))],color:"primary",length:u.value.totalPages,rounded:"large"},null,8,["modelValue","length"])])}}};export{A as default};
