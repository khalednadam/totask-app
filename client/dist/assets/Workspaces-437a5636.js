import{r as p,c as r,o as i,d as v,g as s,w as _,f as c,t as y,l as h,n as P,O as B,v as C,G as k,P as W,e as $,I as j,F as I,j as L,h as N}from"./index-c1ce3c0a.js";const S={key:0},U={key:1},E={__name:"WorkspaceCard",props:{workspace:Object},setup(o){const w=o,e=p(!1),g=async u=>{e.value=!0;try{await h.put(`/w/${w.workspace.id}`,{isPremium:u},{})}catch(a){P(a)}finally{e.value=!1}};return(u,a)=>{const d=r("v-switch"),f=r("v-card-text"),t=r("v-card");return i(),v("div",null,[s(t,null,{default:_(()=>[s(f,null,{default:_(()=>{var l;return[c("div",null,[c("h3",null,y(o.workspace.name),1)]),c("div",null,[o.workspace.createdBy?(i(),v("p",S," Created by: @"+y((l=o.workspace.createdBy)==null?void 0:l.username),1)):(i(),v("p",U)),s(d,{inset:"",loading:e.value,disabled:e.value,"onUpdate:modelValue":[a[0]||(a[0]=m=>g(m)),a[1]||(a[1]=m=>o.workspace.isPremium=m)],label:"Premium",color:"primary",modelValue:o.workspace.isPremium},null,8,["loading","disabled","modelValue"])])]}),_:1})]),_:1})])}}},F={class:"flex justify-between items-center"},O=c("h1",{class:"my-5"}," Workspaces ",-1),q={class:"w-1/2"},D={__name:"Workspaces",setup(o){const w=B(),e=p(null),g=p(!1),u=p({}),a=p(Number(w.query.page)||1),d=async()=>{g.value=!0;try{const t=await h.get("/w/",{params:{limit:9,page:a.value,name:e.value,sortBy:"createdAt:desc"},withCredentials:!0});u.value=t.data}catch(t){console.log(t)}finally{g.value=!1}};C(async()=>{await d()});const f=()=>{window.history.replaceState(null,"",`?page=${a.value}`)};return k(a,()=>{d()},{deep:!0,immediate:!0}),k(e,W(async()=>{var t;((t=e.value)==null?void 0:t.trim().length)===0&&typeof e.value=="string"&&(e.value=null),await d()},500)),(t,l)=>{const m=r("v-text-field"),V=r("v-col"),b=r("v-row"),x=r("v-pagination");return i(),v("div",null,[c("div",F,[O,c("div",q,[s(m,{clearable:"","hide-details":"",label:"Search",modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value=n)},{"append-inner":_(()=>[s($(j),{icon:"ph:magnifying-glass",width:"25"})]),_:1},8,["modelValue"])])]),c("div",null,[s(b,null,{default:_(()=>[(i(!0),v(I,null,L(u.value.results,n=>(i(),N(V,{cols:"12",md:"4",key:n._id},{default:_(()=>[s(E,{workspace:n},null,8,["workspace"])]),_:2},1024))),128))]),_:1})]),s(x,{modelValue:a.value,"onUpdate:modelValue":[l[1]||(l[1]=n=>a.value=n),l[2]||(l[2]=n=>f())],color:"primary",length:u.value.totalPages,rounded:"large"},null,8,["modelValue","length"])])}}};export{D as default};
